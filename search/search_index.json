{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Mezon SDK Python","text":"<p>A Python implementation of the Mezon SDK for building bots and applications on the Mezon platform.</p> <p> </p>"},{"location":"#features","title":"Features","text":"<ul> <li>Async/Await Native - Built with <code>asyncio</code> for high-performance concurrent operations</li> <li>Real-time WebSocket - Full support for real-time messaging with automatic reconnection</li> <li>Type-Safe - Comprehensive type hints and Pydantic models</li> <li>Event-Driven - Elegant event handler system for reactive applications</li> <li>Protocol Buffers - Efficient binary serialization</li> <li>Production Ready - Proper error handling, logging, and graceful shutdown</li> </ul>"},{"location":"#quick-install","title":"Quick Install","text":"<pre><code>pip install mezon-sdk\n</code></pre>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>import asyncio\nfrom mezon import MezonClient\nfrom mezon.models import ChannelMessageContent\nfrom mezon.protobuf.api import api_pb2\n\nclient = MezonClient(\n    client_id=\"YOUR_BOT_ID\",\n    api_key=\"YOUR_API_KEY\",\n)\n\nasync def handle_message(message: api_pb2.ChannelMessage):\n    if message.sender_id == client.client_id:\n        return\n\n    channel = await client.channels.fetch(message.channel_id)\n    await channel.send(content=ChannelMessageContent(t=\"Hello!\"))\n\nclient.on_channel_message(handle_message)\n\nasync def main():\n    await client.login()\n    await asyncio.Event().wait()\n\nasyncio.run(main())\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li> <p>:material-download:{ .lg .middle } Installation</p> <p>Install the SDK using pip, poetry, or uv</p> <p>:octicons-arrow-right-24: Installation Guide</p> </li> <li> <p>:material-rocket-launch:{ .lg .middle } Quick Start</p> <p>Build your first Mezon bot in minutes</p> <p>:octicons-arrow-right-24: Quick Start</p> </li> <li> <p>:material-book-open-variant:{ .lg .middle } Guide</p> <p>Learn about events, messaging, and more</p> <p>:octicons-arrow-right-24: Read the Guide</p> </li> <li> <p>:material-api:{ .lg .middle } API Reference</p> <p>Complete API documentation</p> <p>:octicons-arrow-right-24: API Reference</p> </li> </ul>"},{"location":"#links","title":"Links","text":"<ul> <li>PyPI Package</li> <li>GitHub Repository</li> <li>Issue Tracker</li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to the Mezon SDK Python.</p>"},{"location":"changelog/#v162-2025-12-03","title":"v1.6.2 (2025-12-03)","text":""},{"location":"changelog/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>Execute default handler first before user handlers</li> </ul>"},{"location":"changelog/#v161-2025-12-03","title":"v1.6.1 (2025-12-03)","text":"<p>Maintenance release</p>"},{"location":"changelog/#v160-2025-12-03","title":"v1.6.0 (2025-12-03)","text":""},{"location":"changelog/#features","title":"Features","text":"<ul> <li>Add interactive message structures (ButtonBuilder, InteractiveBuilder)</li> <li>Add methods for clan and notification management</li> </ul>"},{"location":"changelog/#v153-2025-11-30","title":"v1.5.3 (2025-11-30)","text":""},{"location":"changelog/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>Get zkproof using id_token for improved security</li> </ul>"},{"location":"changelog/#v152-2025-11-17","title":"v1.5.2 (2025-11-17)","text":""},{"location":"changelog/#bug-fixes_2","title":"Bug Fixes","text":"<ul> <li>Add rate limiting to WebSocket adapter</li> <li>Enhance message handling with update and reaction features</li> <li>Improve rate limiting in message queue</li> </ul>"},{"location":"changelog/#dependencies","title":"Dependencies","text":"<ul> <li>Added <code>aiolimiter</code> for rate limiting</li> </ul>"},{"location":"changelog/#v151-2025-11-05","title":"v1.5.1 (2025-11-05)","text":""},{"location":"changelog/#bug-fixes_3","title":"Bug Fixes","text":"<ul> <li>Enhance friend management</li> <li>Improve role handling</li> </ul>"},{"location":"changelog/#v150-2025-11-04","title":"v1.5.0 (2025-11-04)","text":""},{"location":"changelog/#features_1","title":"Features","text":"<ul> <li>Token Sending - Integrate MMN and ZK clients</li> <li>Add <code>send_token()</code> method to MezonClient</li> <li>Automatic ZK proof generation for transactions</li> </ul>"},{"location":"changelog/#bug-fixes_4","title":"Bug Fixes","text":"<ul> <li>Enhance event handling with unified handler invocation</li> </ul>"},{"location":"changelog/#v141-2025-11-04","title":"v1.4.1 (2025-11-04)","text":""},{"location":"changelog/#bug-fixes_5","title":"Bug Fixes","text":"<ul> <li>Enhanced event handling with unified handler invocation</li> </ul>"},{"location":"changelog/#v140-2025-11-03","title":"v1.4.0 (2025-11-03)","text":""},{"location":"changelog/#features_2","title":"Features","text":"<ul> <li>Implement <code>on_channel_created</code> event handler</li> </ul>"},{"location":"changelog/#v130-2025-11-01","title":"v1.3.0 (2025-11-01)","text":""},{"location":"changelog/#features_3","title":"Features","text":"<ul> <li>Caching - Add caching and database support</li> <li>SQLite-based message caching with <code>aiosqlite</code></li> <li><code>MessageDB</code> class for message persistence</li> </ul>"},{"location":"changelog/#v120-2025-10-31","title":"v1.2.0 (2025-10-31)","text":""},{"location":"changelog/#features_4","title":"Features","text":"<ul> <li>Enhance socket management</li> <li>Improve event handling</li> </ul>"},{"location":"changelog/#v110-2025-10-31","title":"v1.1.0 (2025-10-31)","text":""},{"location":"changelog/#features_5","title":"Features","text":"<ul> <li>Add Apache 2.0 license</li> <li>Update project configuration</li> </ul>"},{"location":"changelog/#v100-2025-10-31","title":"v1.0.0 (2025-10-31)","text":""},{"location":"changelog/#initial-release","title":"Initial Release","text":"<ul> <li>Async/await native implementation</li> <li>WebSocket real-time messaging</li> <li>Event-driven architecture</li> <li>Protocol Buffers support</li> <li>Type-safe with Pydantic models</li> <li>Channel and clan management</li> <li>Message sending and receiving</li> <li>User management</li> </ul>"},{"location":"api-reference/builders/","title":"Builders","text":"<p>Builder classes for creating rich interactive content.</p>"},{"location":"api-reference/builders/#buttonbuilder","title":"ButtonBuilder","text":"<p>Create interactive buttons for messages.</p>"},{"location":"api-reference/builders/#constructor","title":"Constructor","text":"<pre><code>from mezon import ButtonBuilder\n\nbuttons = ButtonBuilder()\n</code></pre>"},{"location":"api-reference/builders/#methods","title":"Methods","text":""},{"location":"api-reference/builders/#add_buttonid-label-style-urlnone-disabledfalse-buttonbuilder","title":"<code>add_button(id, label, style, url=None, disabled=False) -&gt; ButtonBuilder</code>","text":"<p>Add a button to the builder.</p> <pre><code>from mezon import ButtonMessageStyle\n\nbuttons.add_button(\n    id=\"btn_accept\",           # Button ID (for handling clicks)\n    label=\"Accept\",            # Display text\n    style=ButtonMessageStyle.SUCCESS,  # Button style\n    url=None,                  # URL (only for LINK style)\n    disabled=False,            # Disable the button\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>id</code> <code>str</code> Required Unique button ID <code>label</code> <code>str</code> Required Button text <code>style</code> <code>ButtonMessageStyle</code> Required Button style <code>url</code> <code>str</code> <code>None</code> URL for LINK buttons <code>disabled</code> <code>bool</code> <code>False</code> Disable button <p>Returns: <code>ButtonBuilder</code> (for chaining)</p>"},{"location":"api-reference/builders/#build-listdict","title":"<code>build() -&gt; List[dict]</code>","text":"<p>Build the button components.</p> <pre><code>components = buttons.build()\n</code></pre>"},{"location":"api-reference/builders/#button-styles","title":"Button Styles","text":"<pre><code>from mezon import ButtonMessageStyle\n\nButtonMessageStyle.PRIMARY     # Blue - primary action\nButtonMessageStyle.SECONDARY   # Gray - secondary action\nButtonMessageStyle.SUCCESS     # Green - confirm/accept\nButtonMessageStyle.DANGER      # Red - cancel/delete\nButtonMessageStyle.LINK        # Link - requires url param\n</code></pre>"},{"location":"api-reference/builders/#example","title":"Example","text":"<pre><code>from mezon import ButtonBuilder, ButtonMessageStyle\nfrom mezon.models import ChannelMessageContent\n\nbuttons = ButtonBuilder()\nbuttons.add_button(\"yes\", \"Yes\", ButtonMessageStyle.SUCCESS)\nbuttons.add_button(\"no\", \"No\", ButtonMessageStyle.DANGER)\nbuttons.add_button(\"docs\", \"Documentation\", ButtonMessageStyle.LINK, url=\"https://docs.mezon.ai\")\n\nawait channel.send(\n    content=ChannelMessageContent(\n        text=\"Do you agree?\",\n        components=[{\"components\": buttons.build()}]\n    )\n)\n</code></pre>"},{"location":"api-reference/builders/#interactivebuilder","title":"InteractiveBuilder","text":"<p>Create rich interactive forms and embeds.</p>"},{"location":"api-reference/builders/#constructor_1","title":"Constructor","text":"<pre><code>from mezon import InteractiveBuilder\n\nform = InteractiveBuilder(title=\"Form Title\")\n</code></pre>"},{"location":"api-reference/builders/#styling-methods","title":"Styling Methods","text":""},{"location":"api-reference/builders/#set_titletitle-str-interactivebuilder","title":"<code>set_title(title: str) -&gt; InteractiveBuilder</code>","text":"<p>Set the embed title.</p>"},{"location":"api-reference/builders/#set_descriptiondescription-str-interactivebuilder","title":"<code>set_description(description: str) -&gt; InteractiveBuilder</code>","text":"<p>Set the embed description.</p>"},{"location":"api-reference/builders/#set_colorcolor-str-interactivebuilder","title":"<code>set_color(color: str) -&gt; InteractiveBuilder</code>","text":"<p>Set the embed color (hex format).</p> <pre><code>form.set_color(\"#5865F2\")\n</code></pre>"},{"location":"api-reference/builders/#set_urlurl-str-interactivebuilder","title":"<code>set_url(url: str) -&gt; InteractiveBuilder</code>","text":"<p>Set the title URL.</p>"},{"location":"api-reference/builders/#set_authorname-icon_urlnone-urlnone-interactivebuilder","title":"<code>set_author(name, icon_url=None, url=None) -&gt; InteractiveBuilder</code>","text":"<p>Set author information.</p> <pre><code>form.set_author(\n    name=\"Bot Name\",\n    icon_url=\"https://example.com/icon.png\",\n    url=\"https://example.com\"\n)\n</code></pre>"},{"location":"api-reference/builders/#set_thumbnailurl-str-interactivebuilder","title":"<code>set_thumbnail(url: str) -&gt; InteractiveBuilder</code>","text":"<p>Set thumbnail image.</p>"},{"location":"api-reference/builders/#set_imageurl-widthnone-heightnone-interactivebuilder","title":"<code>set_image(url, width=None, height=None) -&gt; InteractiveBuilder</code>","text":"<p>Set main image.</p> <pre><code>form.set_image(\"https://example.com/image.png\", width=\"800\", height=\"400\")\n</code></pre>"},{"location":"api-reference/builders/#set_footertext-icon_urlnone-interactivebuilder","title":"<code>set_footer(text, icon_url=None) -&gt; InteractiveBuilder</code>","text":"<p>Set footer text.</p>"},{"location":"api-reference/builders/#field-methods","title":"Field Methods","text":""},{"location":"api-reference/builders/#add_fieldname-value-inlinefalse-interactivebuilder","title":"<code>add_field(name, value, inline=False) -&gt; InteractiveBuilder</code>","text":"<p>Add a simple text field.</p> <pre><code>form.add_field(\"Name\", \"Value\", inline=True)\n</code></pre>"},{"location":"api-reference/builders/#add_input_fieldid-label-placeholdernone-descriptionnone-interactivebuilder","title":"<code>add_input_field(id, label, placeholder=None, description=None) -&gt; InteractiveBuilder</code>","text":"<p>Add a text input field.</p> <pre><code>form.add_input_field(\n    id=\"username\",\n    label=\"Username\",\n    placeholder=\"Enter username...\",\n    description=\"Your display name\"\n)\n</code></pre>"},{"location":"api-reference/builders/#add_select_fieldid-label-options-descriptionnone-interactivebuilder","title":"<code>add_select_field(id, label, options, description=None) -&gt; InteractiveBuilder</code>","text":"<p>Add a dropdown select field.</p> <pre><code>from mezon.models import SelectFieldOption\n\nform.add_select_field(\n    id=\"country\",\n    label=\"Country\",\n    options=[\n        SelectFieldOption(label=\"USA\", value=\"us\"),\n        SelectFieldOption(label=\"Vietnam\", value=\"vn\"),\n    ],\n    description=\"Select your country\"\n)\n</code></pre>"},{"location":"api-reference/builders/#add_radio_fieldid-label-options-descriptionnone-interactivebuilder","title":"<code>add_radio_field(id, label, options, description=None) -&gt; InteractiveBuilder</code>","text":"<p>Add radio button options.</p> <pre><code>from mezon.models import RadioFieldOption\n\nform.add_radio_field(\n    id=\"plan\",\n    label=\"Subscription\",\n    options=[\n        RadioFieldOption(label=\"Free\", value=\"free\", description=\"Basic\"),\n        RadioFieldOption(label=\"Pro\", value=\"pro\", description=\"Advanced\"),\n    ]\n)\n</code></pre>"},{"location":"api-reference/builders/#add_datepicker_fieldid-label-descriptionnone-interactivebuilder","title":"<code>add_datepicker_field(id, label, description=None) -&gt; InteractiveBuilder</code>","text":"<p>Add a date picker field.</p> <pre><code>form.add_datepicker_field(\n    id=\"birthdate\",\n    label=\"Birth Date\",\n    description=\"Select your birth date\"\n)\n</code></pre>"},{"location":"api-reference/builders/#add_animationurl-interactivebuilder","title":"<code>add_animation(url) -&gt; InteractiveBuilder</code>","text":"<p>Add animated content.</p> <pre><code>form.add_animation(\"https://example.com/animation.gif\")\n</code></pre>"},{"location":"api-reference/builders/#build-dict","title":"<code>build() -&gt; dict</code>","text":"<p>Build the embed dictionary.</p> <pre><code>embed = form.build()\n</code></pre>"},{"location":"api-reference/builders/#complete-example","title":"Complete Example","text":"<pre><code>from mezon import InteractiveBuilder, ButtonBuilder, ButtonMessageStyle\nfrom mezon.models import ChannelMessageContent, SelectFieldOption, RadioFieldOption\n\n# Build form\nform = InteractiveBuilder(\"Registration Form\")\nform.set_color(\"#5865F2\")\nform.set_description(\"Please complete the form below\")\nform.set_author(\"Registration Bot\", icon_url=\"https://example.com/bot.png\")\n\nform.add_input_field(\"name\", \"Full Name\", placeholder=\"John Doe\")\nform.add_input_field(\"email\", \"Email\", placeholder=\"john@example.com\")\n\nform.add_select_field(\n    \"role\",\n    \"Role\",\n    options=[\n        SelectFieldOption(label=\"Developer\", value=\"dev\"),\n        SelectFieldOption(label=\"Designer\", value=\"design\"),\n        SelectFieldOption(label=\"Manager\", value=\"mgmt\"),\n    ]\n)\n\nform.add_radio_field(\n    \"newsletter\",\n    \"Subscribe to newsletter?\",\n    options=[\n        RadioFieldOption(label=\"Yes\", value=\"yes\"),\n        RadioFieldOption(label=\"No\", value=\"no\"),\n    ]\n)\n\nform.set_footer(\"Powered by Mezon\")\n\n# Build buttons\nbuttons = ButtonBuilder()\nbuttons.add_button(\"submit\", \"Submit\", ButtonMessageStyle.SUCCESS)\nbuttons.add_button(\"cancel\", \"Cancel\", ButtonMessageStyle.SECONDARY)\n\n# Send\nawait channel.send(\n    content=ChannelMessageContent(\n        embed=[form.build()],\n        components=[{\"components\": buttons.build()}]\n    )\n)\n</code></pre>"},{"location":"api-reference/channel/","title":"TextChannel","text":"<p>Represents a text channel on Mezon.</p>"},{"location":"api-reference/channel/#accessing-channels","title":"Accessing Channels","text":"<pre><code># From client\nchannel = await client.channels.fetch(\"channel_id\")\n\n# From clan\nclan = await client.clans.get(\"clan_id\")\nawait clan.load_channels()\nchannel = await clan.channels.get(\"channel_id\")\n</code></pre>"},{"location":"api-reference/channel/#properties","title":"Properties","text":"Property Type Description <code>id</code> <code>str</code> Channel ID <code>name</code> <code>str</code> Channel name <code>channel_type</code> <code>int</code> Type of channel <code>is_private</code> <code>bool</code> Whether channel is private <code>messages</code> <code>MessageManager</code> Message cache manager"},{"location":"api-reference/channel/#methods","title":"Methods","text":""},{"location":"api-reference/channel/#send-channelmessageack","title":"<code>send(...) -&gt; ChannelMessageAck</code>","text":"<p>Send a message to the channel.</p> <pre><code>from mezon.models import ChannelMessageContent, ApiMessageMention, ApiMessageAttachment\n\nresult = await channel.send(\n    content=ChannelMessageContent(t=\"Hello!\"),\n    mentions=None,      # Optional[List[ApiMessageMention]]\n    attachments=None,   # Optional[List[ApiMessageAttachment]]\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>content</code> <code>ChannelMessageContent</code> Message content <code>mentions</code> <code>List[ApiMessageMention]</code> User mentions <code>attachments</code> <code>List[ApiMessageAttachment]</code> Attachments <p>Returns: <code>ChannelMessageAck</code> with <code>message_id</code></p>"},{"location":"api-reference/channel/#send_ephemeral-none","title":"<code>send_ephemeral(...) -&gt; None</code>","text":"<p>Send an ephemeral message (only visible to one user).</p> <pre><code>await channel.send_ephemeral(\n    receiver_id=\"user_id\",\n    content=ChannelMessageContent(text=\"Only you see this!\")\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>receiver_id</code> <code>str</code> User who will see the message <code>content</code> <code>ChannelMessageContent</code> Message content"},{"location":"api-reference/channel/#messagesgetmessage_id-str-message","title":"<code>messages.get(message_id: str) -&gt; Message</code>","text":"<p>Get a message object by ID.</p> <pre><code>message = channel.messages.get(\"message_id\")\n\n# Then use message methods\nawait message.reply(content=ChannelMessageContent(t=\"Reply!\"))\nawait message.update(content=ChannelMessageContent(t=\"Updated!\"))\n</code></pre>"},{"location":"api-reference/channel/#example","title":"Example","text":"<pre><code>from mezon.models import ChannelMessageContent, ApiMessageMention\n\n# Fetch channel\nchannel = await client.channels.fetch(\"channel_id\")\n\n# Send message\nsent = await channel.send(\n    content=ChannelMessageContent(t=\"Hello @user!\"),\n    mentions=[ApiMessageMention(user_id=\"user_id\")]\n)\n\nprint(f\"Sent message: {sent.message_id}\")\n\n# Send ephemeral\nawait channel.send_ephemeral(\n    receiver_id=\"user_id\",\n    content=ChannelMessageContent(text=\"Private message!\")\n)\n\n# Get and reply to a message\nmessage = channel.messages.get(sent.message_id)\nawait message.reply(content=ChannelMessageContent(t=\"Self-reply!\"))\n</code></pre>"},{"location":"api-reference/channel/#channel-types","title":"Channel Types","text":"<pre><code>from mezon.constants import ChannelType\n\nChannelType.TEXT           # Text channel\nChannelType.VOICE          # Voice channel\nChannelType.DM             # Direct message\nChannelType.GROUP_DM       # Group DM\nChannelType.CATEGORY       # Category\nChannelType.ANNOUNCEMENT   # Announcement\nChannelType.FORUM          # Forum\n</code></pre>"},{"location":"api-reference/clan/","title":"Clan","text":"<p>Represents a clan (server/community) on Mezon.</p>"},{"location":"api-reference/clan/#accessing-clans","title":"Accessing Clans","text":"<pre><code>clan = await client.clans.get(\"clan_id\")\n</code></pre>"},{"location":"api-reference/clan/#properties","title":"Properties","text":"Property Type Description <code>id</code> <code>str</code> Clan ID <code>name</code> <code>str</code> Clan name <code>channels</code> <code>CacheManager</code> Channel manager for the clan <code>users</code> <code>CacheManager</code> User manager for the clan"},{"location":"api-reference/clan/#methods","title":"Methods","text":""},{"location":"api-reference/clan/#load_channels-none","title":"<code>load_channels() -&gt; None</code>","text":"<p>Load all channels in the clan.</p> <pre><code>await clan.load_channels()\n</code></pre>"},{"location":"api-reference/clan/#list_channel_voice_users-apivoicechanneluserlist","title":"<code>list_channel_voice_users(...) -&gt; ApiVoiceChannelUserList</code>","text":"<p>List users in voice channels.</p> <pre><code>voice_users = await clan.list_channel_voice_users(\n    channel_id=None,      # Optional: specific channel\n    channel_type=None,    # Optional: channel type filter\n    limit=100,            # Optional: max results\n    state=None,           # Optional: state filter\n    cursor=None,          # Optional: pagination cursor\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>channel_id</code> <code>str</code> <code>None</code> Specific channel to query <code>channel_type</code> <code>int</code> <code>None</code> Channel type filter <code>limit</code> <code>int</code> <code>100</code> Maximum results <code>state</code> <code>int</code> <code>None</code> State filter <code>cursor</code> <code>str</code> <code>None</code> Pagination cursor <p>Returns: <code>ApiVoiceChannelUserList</code></p>"},{"location":"api-reference/clan/#list_roles-list","title":"<code>list_roles(...) -&gt; List</code>","text":"<p>List all roles in the clan.</p> <pre><code>roles = await clan.list_roles(\n    limit=100,\n    state=None,\n    cursor=None,\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>limit</code> <code>int</code> <code>100</code> Maximum results <code>state</code> <code>int</code> <code>None</code> State filter <code>cursor</code> <code>str</code> <code>None</code> Pagination cursor"},{"location":"api-reference/clan/#update_rolerole_id-str-request-dict-none","title":"<code>update_role(role_id: str, request: dict) -&gt; None</code>","text":"<p>Update a role.</p> <pre><code>await clan.update_role(\n    role_id=\"role_id\",\n    request={\n        \"title\": \"New Role Name\",\n        \"permissions\": [\"SEND_MESSAGE\", \"READ_MESSAGES\"],\n    }\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>role_id</code> <code>str</code> Role ID to update <code>request</code> <code>dict</code> Update data"},{"location":"api-reference/clan/#example","title":"Example","text":"<pre><code># Get clan\nclan = await client.clans.get(\"clan_id\")\n\n# Load channels\nawait clan.load_channels()\n\n# Access a channel\nchannel = await clan.channels.get(\"channel_id\")\n\n# List voice users\nvoice_users = await clan.list_channel_voice_users()\nfor user in voice_users:\n    print(f\"In voice: {user}\")\n\n# List and update roles\nroles = await clan.list_roles()\nfor role in roles:\n    print(f\"Role: {role.title}\")\n\nawait clan.update_role(\n    role_id=roles[0].id,\n    request={\"title\": \"Updated Role\"}\n)\n</code></pre>"},{"location":"api-reference/client/","title":"MezonClient","text":"<p>The main entry point for interacting with the Mezon platform.</p>"},{"location":"api-reference/client/#constructor","title":"Constructor","text":"<pre><code>from mezon import MezonClient\n\nclient = MezonClient(\n    client_id: str,\n    api_key: str,\n    host: str = \"gw.mezon.ai\",\n    port: str = \"443\",\n    use_ssl: bool = True,\n    timeout: int = 7000,\n    enable_logging: bool = False,\n    log_level: int = logging.INFO,\n)\n</code></pre>"},{"location":"api-reference/client/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>client_id</code> <code>str</code> Required Your bot's client ID <code>api_key</code> <code>str</code> Required Your API key <code>host</code> <code>str</code> <code>\"gw.mezon.ai\"</code> API host <code>port</code> <code>str</code> <code>\"443\"</code> API port <code>use_ssl</code> <code>bool</code> <code>True</code> Use SSL connection <code>timeout</code> <code>int</code> <code>7000</code> Request timeout in ms <code>enable_logging</code> <code>bool</code> <code>False</code> Enable SDK logging <code>log_level</code> <code>int</code> <code>logging.INFO</code> Python logging level"},{"location":"api-reference/client/#properties","title":"Properties","text":"Property Type Description <code>client_id</code> <code>str</code> The bot's client ID <code>channels</code> <code>CacheManager[int, TextChannel]</code> Channel manager <code>clans</code> <code>CacheManager[int, Clan]</code> Clan manager <code>users</code> <code>CacheManager[int, User]</code> User manager <code>session_manager</code> <code>SessionManager</code> Session management <code>socket_manager</code> <code>SocketManager</code> WebSocket management <code>channel_manager</code> <code>ChannelManager</code> Channel management <code>event_manager</code> <code>EventManager</code> Event management <code>api_client</code> <code>MezonApi</code> HTTP API client"},{"location":"api-reference/client/#methods","title":"Methods","text":""},{"location":"api-reference/client/#authentication","title":"Authentication","text":""},{"location":"api-reference/client/#loginenable_auto_reconnect-bool-true-none","title":"<code>login(enable_auto_reconnect: bool = True) -&gt; None</code>","text":"<p>Authenticate and connect to Mezon.</p> <pre><code>await client.login()\nawait client.login(enable_auto_reconnect=False)\n</code></pre>"},{"location":"api-reference/client/#close_socket-none","title":"<code>close_socket() -&gt; None</code>","text":"<p>Close the WebSocket connection.</p> <pre><code>await client.close_socket()\n</code></pre>"},{"location":"api-reference/client/#messaging","title":"Messaging","text":""},{"location":"api-reference/client/#send_message-channelmessageack","title":"<code>send_message(...) -&gt; ChannelMessageAck</code>","text":"<p>Send a message to a channel (legacy method).</p> <pre><code>from mezon.models import ApiMessageMention, ApiMessageAttachment, ApiMessageRef\n\nresult = await client.send_message(\n    clan_id=\"clan_id\",\n    channel_id=\"channel_id\",\n    mode=1,\n    is_public=True,\n    msg=\"Hello!\",\n    mentions=None,      # Optional[List[ApiMessageMention]]\n    attachments=None,   # Optional[List[ApiMessageAttachment]]\n    ref=None,           # Optional[List[ApiMessageRef]]\n)\n</code></pre>"},{"location":"api-reference/client/#send_tokenrequest-apisenttokenrequest-addtxresponse","title":"<code>send_token(request: ApiSentTokenRequest) -&gt; AddTxResponse</code>","text":"<p>Send tokens to a user.</p> <pre><code>from mezon.models import ApiSentTokenRequest\n\nresult = await client.send_token(\n    ApiSentTokenRequest(\n        receiver_id=\"user_id\",\n        amount=10,\n        note=\"Thanks!\",\n    )\n)\n</code></pre>"},{"location":"api-reference/client/#friends","title":"Friends","text":""},{"location":"api-reference/client/#get_list_friendslimit-int-state-int-none-cursor-str-none-list","title":"<code>get_list_friends(limit: int, state: int = None, cursor: str = None) -&gt; List</code>","text":"<p>Get list of friends.</p> <pre><code>friends = await client.get_list_friends(limit=100)\n</code></pre>"},{"location":"api-reference/client/#accept_frienduser_id-str-none","title":"<code>accept_friend(user_id: str) -&gt; None</code>","text":"<p>Accept a friend request.</p> <pre><code>await client.accept_friend(user_id=\"user_id\")\n</code></pre>"},{"location":"api-reference/client/#add_friendusername-str-user_id-str-none","title":"<code>add_friend(username: str, user_id: str) -&gt; None</code>","text":"<p>Add a friend.</p> <pre><code>await client.add_friend(username=\"username\", user_id=\"user_id\")\n</code></pre>"},{"location":"api-reference/client/#event-handlers","title":"Event Handlers","text":""},{"location":"api-reference/client/#onevent_name-str-handler-callable-none","title":"<code>on(event_name: str, handler: Callable) -&gt; None</code>","text":"<p>Register a generic event handler.</p> <pre><code>from mezon import Events\n\nasync def handler(data):\n    print(data)\n\nclient.on(Events.VOICE_STARTED_EVENT, handler)\n</code></pre>"},{"location":"api-reference/client/#on_channel_messagehandler-callable-none","title":"<code>on_channel_message(handler: Callable) -&gt; None</code>","text":"<p>Handle channel messages.</p> <pre><code>async def handler(message: api_pb2.ChannelMessage):\n    print(message.content)\n\nclient.on_channel_message(handler)\n</code></pre>"},{"location":"api-reference/client/#on_channel_createdhandler-callable-none","title":"<code>on_channel_created(handler: Callable) -&gt; None</code>","text":"<p>Handle channel creation.</p> <pre><code>async def handler(event: realtime_pb2.ChannelCreatedEvent):\n    print(event.channel_id)\n\nclient.on_channel_created(handler)\n</code></pre>"},{"location":"api-reference/client/#on_channel_updatedhandler-callable-none","title":"<code>on_channel_updated(handler: Callable) -&gt; None</code>","text":"<p>Handle channel updates.</p>"},{"location":"api-reference/client/#on_channel_deletedhandler-callable-none","title":"<code>on_channel_deleted(handler: Callable) -&gt; None</code>","text":"<p>Handle channel deletion.</p>"},{"location":"api-reference/client/#on_user_channel_addedhandler-callable-none","title":"<code>on_user_channel_added(handler: Callable) -&gt; None</code>","text":"<p>Handle user joining channel.</p>"},{"location":"api-reference/client/#on_user_channel_removedhandler-callable-none","title":"<code>on_user_channel_removed(handler: Callable) -&gt; None</code>","text":"<p>Handle user leaving channel.</p>"},{"location":"api-reference/client/#on_add_clan_userhandler-callable-none","title":"<code>on_add_clan_user(handler: Callable) -&gt; None</code>","text":"<p>Handle user joining clan.</p>"},{"location":"api-reference/client/#on_clan_event_createdhandler-callable-none","title":"<code>on_clan_event_created(handler: Callable) -&gt; None</code>","text":"<p>Handle clan event creation.</p>"},{"location":"api-reference/client/#on_message_button_clickedhandler-callable-none","title":"<code>on_message_button_clicked(handler: Callable) -&gt; None</code>","text":"<p>Handle message button clicks.</p>"},{"location":"api-reference/client/#on_notificationhandler-callable-none","title":"<code>on_notification(handler: Callable) -&gt; None</code>","text":"<p>Handle notifications.</p>"},{"location":"api-reference/events/","title":"Events","text":"<p>Event types available in the SDK.</p>"},{"location":"api-reference/events/#using-events","title":"Using Events","text":"<pre><code>from mezon import Events\n\n# Register handler\nclient.on(Events.CHANNEL_MESSAGE, handler)\n</code></pre>"},{"location":"api-reference/events/#event-reference","title":"Event Reference","text":""},{"location":"api-reference/events/#message-events","title":"Message Events","text":"Event Description Convenient Method <code>Events.CHANNEL_MESSAGE</code> New message in channel <code>on_channel_message()</code> <code>Events.MESSAGE_REACTION</code> Reaction added/removed - <code>Events.MESSAGE_TYPING_EVENT</code> User is typing - <code>Events.MESSAGE_BUTTON_CLICKED</code> Button clicked <code>on_message_button_clicked()</code>"},{"location":"api-reference/events/#channel-events","title":"Channel Events","text":"Event Description Convenient Method <code>Events.CHANNEL_CREATED</code> Channel created <code>on_channel_created()</code> <code>Events.CHANNEL_UPDATED</code> Channel updated <code>on_channel_updated()</code> <code>Events.CHANNEL_DELETED</code> Channel deleted <code>on_channel_deleted()</code> <code>Events.CHANNEL_PRESENCE_EVENT</code> User presence in channel -"},{"location":"api-reference/events/#user-events","title":"User Events","text":"Event Description Convenient Method <code>Events.USER_CHANNEL_ADDED</code> User joined channel <code>on_user_channel_added()</code> <code>Events.USER_CHANNEL_REMOVED</code> User left channel <code>on_user_channel_removed()</code> <code>Events.USER_CLAN_REMOVED</code> User left clan - <code>Events.ADD_CLAN_USER</code> User joined clan <code>on_add_clan_user()</code>"},{"location":"api-reference/events/#voice-events","title":"Voice Events","text":"Event Description Convenient Method <code>Events.VOICE_STARTED_EVENT</code> Voice session started - <code>Events.VOICE_ENDED_EVENT</code> Voice session ended - <code>Events.VOICE_JOINED_EVENT</code> User joined voice - <code>Events.VOICE_LEAVED_EVENT</code> User left voice -"},{"location":"api-reference/events/#clan-events","title":"Clan Events","text":"Event Description Convenient Method <code>Events.CLAN_UPDATED_EVENT</code> Clan settings updated - <code>Events.CLAN_EVENT_CREATED</code> Clan event created <code>on_clan_event_created()</code>"},{"location":"api-reference/events/#other-events","title":"Other Events","text":"Event Description Convenient Method <code>Events.GIVE_COFFEE</code> Coffee given - <code>Events.TOKEN_SEND</code> Token sent - <code>Events.NOTIFICATION</code> Notification received <code>on_notification()</code>"},{"location":"api-reference/events/#event-handlers","title":"Event Handlers","text":""},{"location":"api-reference/events/#convenient-methods","title":"Convenient Methods","text":"<pre><code>from mezon.protobuf.api import api_pb2\nfrom mezon.protobuf.rtapi import realtime_pb2\n\n# Message\nasync def on_message(msg: api_pb2.ChannelMessage):\n    print(msg.content)\n\nclient.on_channel_message(on_message)\n\n# Channel created\nasync def on_created(event: realtime_pb2.ChannelCreatedEvent):\n    print(event.channel_id)\n\nclient.on_channel_created(on_created)\n\n# User joined channel\nasync def on_joined(event: realtime_pb2.UserChannelAdded):\n    print(f\"{event.user_id} joined {event.channel_id}\")\n\nclient.on_user_channel_added(on_joined)\n</code></pre>"},{"location":"api-reference/events/#generic-handler","title":"Generic Handler","text":"<pre><code>from mezon import Events\n\nasync def handler(data):\n    print(f\"Event: {data}\")\n\nclient.on(Events.VOICE_STARTED_EVENT, handler)\nclient.on(Events.GIVE_COFFEE, handler)\n</code></pre>"},{"location":"api-reference/events/#handler-types","title":"Handler Types","text":"<p>Both sync and async handlers are supported:</p> <pre><code># Async (recommended)\nasync def async_handler(data):\n    await some_operation()\n\n# Sync\ndef sync_handler(data):\n    print(data)\n\nclient.on(Events.GIVE_COFFEE, async_handler)\nclient.on(Events.GIVE_COFFEE, sync_handler)\n</code></pre>"},{"location":"api-reference/events/#multiple-handlers","title":"Multiple Handlers","text":"<p>Register multiple handlers for the same event:</p> <pre><code>async def log_message(msg):\n    print(f\"Log: {msg}\")\n\nasync def process_message(msg):\n    # Process...\n    pass\n\nclient.on_channel_message(log_message)\nclient.on_channel_message(process_message)\n</code></pre> <p>Both handlers run for each message.</p>"},{"location":"api-reference/message/","title":"Message","text":"<p>Represents a message on Mezon.</p>"},{"location":"api-reference/message/#accessing-messages","title":"Accessing Messages","text":"<pre><code># From channel\nchannel = await client.channels.fetch(\"channel_id\")\nmessage = channel.messages.get(\"message_id\")\n</code></pre>"},{"location":"api-reference/message/#methods","title":"Methods","text":""},{"location":"api-reference/message/#reply-channelmessageack","title":"<code>reply(...) -&gt; ChannelMessageAck</code>","text":"<p>Reply to the message.</p> <pre><code>from mezon.models import ChannelMessageContent, ApiMessageMention, ApiMessageAttachment\n\nresult = await message.reply(\n    content=ChannelMessageContent(t=\"This is a reply!\"),\n    mentions=None,      # Optional[List[ApiMessageMention]]\n    attachments=None,   # Optional[List[ApiMessageAttachment]]\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>content</code> <code>ChannelMessageContent</code> Reply content <code>mentions</code> <code>List[ApiMessageMention]</code> User mentions <code>attachments</code> <code>List[ApiMessageAttachment]</code> Attachments <p>Returns: <code>ChannelMessageAck</code></p>"},{"location":"api-reference/message/#updatecontent-channelmessagecontent-none","title":"<code>update(content: ChannelMessageContent) -&gt; None</code>","text":"<p>Update/edit the message content.</p> <pre><code>await message.update(\n    content=ChannelMessageContent(t=\"Updated content (edited)\")\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>content</code> <code>ChannelMessageContent</code> New content"},{"location":"api-reference/message/#react-none","title":"<code>react(...) -&gt; None</code>","text":"<p>Add a reaction to the message.</p> <pre><code>await message.react(\n    emoji_id=\"emoji_id\",\n    emoji=\"emoji_name\",\n    count=1\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>emoji_id</code> <code>str</code> Emoji ID <code>emoji</code> <code>str</code> Emoji name/text <code>count</code> <code>int</code> Reaction count"},{"location":"api-reference/message/#example","title":"Example","text":"<pre><code>from mezon.models import ChannelMessageContent\n\n# Get channel and send a message\nchannel = await client.channels.fetch(\"channel_id\")\nsent = await channel.send(content=ChannelMessageContent(t=\"Original\"))\n\n# Get the message object\nmessage = channel.messages.get(sent.message_id)\n\n# Reply to it\nawait message.reply(content=ChannelMessageContent(t=\"Reply!\"))\n\n# Update it\nawait message.update(content=ChannelMessageContent(t=\"Updated (edited)\"))\n\n# React to it\nawait message.react(emoji_id=\"emoji_123\", emoji=\"thumbsup\", count=1)\n</code></pre>"},{"location":"api-reference/message/#in-message-handlers","title":"In Message Handlers","text":"<pre><code>import json\nfrom mezon.protobuf.api import api_pb2\n\nasync def handle_message(message_event: api_pb2.ChannelMessage):\n    if message_event.sender_id == client.client_id:\n        return\n\n    content = json.loads(message_event.content)\n    text = content.get(\"t\", \"\")\n\n    if text == \"!ping\":\n        channel = await client.channels.fetch(message_event.channel_id)\n        message = channel.messages.get(message_event.message_id)\n        await message.reply(content=ChannelMessageContent(t=\"Pong!\"))\n\nclient.on_channel_message(handle_message)\n</code></pre>"},{"location":"api-reference/models/","title":"Models","text":"<p>Pydantic models for API requests and responses.</p>"},{"location":"api-reference/models/#message-models","title":"Message Models","text":""},{"location":"api-reference/models/#channelmessagecontent","title":"ChannelMessageContent","text":"<p>Message content structure.</p> <pre><code>from mezon.models import ChannelMessageContent\n\ncontent = ChannelMessageContent(\n    t=\"Message text\",              # Text content\n    text=\"Alternative text field\", # Alternative text field\n    embed=[...],                   # Embed objects\n    components=[...],              # Interactive components\n)\n</code></pre> Field Type Description <code>t</code> <code>str</code> Message text <code>text</code> <code>str</code> Alternative text field <code>embed</code> <code>List[dict]</code> Embed objects <code>components</code> <code>List[dict]</code> Interactive components"},{"location":"api-reference/models/#apimessagemention","title":"ApiMessageMention","text":"<p>User mention in a message.</p> <pre><code>from mezon.models import ApiMessageMention\n\nmention = ApiMessageMention(\n    user_id=\"user_id_here\",\n    username=\"optional_username\",\n)\n</code></pre> Field Type Description <code>user_id</code> <code>str</code> User ID to mention <code>username</code> <code>str</code> Optional username"},{"location":"api-reference/models/#apimessageattachment","title":"ApiMessageAttachment","text":"<p>Message attachment.</p> <pre><code>from mezon.models import ApiMessageAttachment\n\nattachment = ApiMessageAttachment(\n    url=\"https://example.com/file.png\",\n    filename=\"file.png\",\n    filetype=\"image/png\",\n    size=1024,\n)\n</code></pre> Field Type Description <code>url</code> <code>str</code> Attachment URL <code>filename</code> <code>str</code> File name <code>filetype</code> <code>str</code> MIME type <code>size</code> <code>int</code> File size in bytes"},{"location":"api-reference/models/#apimessageref","title":"ApiMessageRef","text":"<p>Message reference (for replies).</p> <pre><code>from mezon.models import ApiMessageRef\n\nref = ApiMessageRef(\n    message_id=\"original_message_id\",\n)\n</code></pre> Field Type Description <code>message_id</code> <code>str</code> Referenced message ID"},{"location":"api-reference/models/#channelmessageack","title":"ChannelMessageAck","text":"<p>Message send acknowledgment.</p> <pre><code>result = await channel.send(...)\nprint(result.message_id)\n</code></pre> Field Type Description <code>message_id</code> <code>str</code> Sent message ID"},{"location":"api-reference/models/#token-models","title":"Token Models","text":""},{"location":"api-reference/models/#apisenttokenrequest","title":"ApiSentTokenRequest","text":"<p>Token sending request.</p> <pre><code>from mezon.models import ApiSentTokenRequest\n\nrequest = ApiSentTokenRequest(\n    receiver_id=\"user_id\",\n    amount=10,\n    note=\"Thanks!\",\n    sender_name=\"Bot Name\",      # Optional\n    sender_id=\"custom_sender\",   # Optional\n    extra_attribute=\"metadata\",  # Optional\n    mmn_extra_info={...},        # Optional\n)\n</code></pre> Field Type Required Description <code>receiver_id</code> <code>str</code> Yes Recipient user ID <code>amount</code> <code>int</code> Yes Token amount <code>note</code> <code>str</code> No Transaction note <code>sender_name</code> <code>str</code> No Custom sender name <code>sender_id</code> <code>str</code> No Override sender ID <code>extra_attribute</code> <code>str</code> No Extra metadata <code>mmn_extra_info</code> <code>dict</code> No MMN-specific info"},{"location":"api-reference/models/#interactive-field-options","title":"Interactive Field Options","text":""},{"location":"api-reference/models/#selectfieldoption","title":"SelectFieldOption","text":"<p>Option for select dropdowns.</p> <pre><code>from mezon.models import SelectFieldOption\n\noption = SelectFieldOption(\n    label=\"Display Text\",\n    value=\"option_value\",\n)\n</code></pre> Field Type Description <code>label</code> <code>str</code> Display text <code>value</code> <code>str</code> Option value"},{"location":"api-reference/models/#radiofieldoption","title":"RadioFieldOption","text":"<p>Option for radio buttons.</p> <pre><code>from mezon.models import RadioFieldOption\n\noption = RadioFieldOption(\n    label=\"Option Label\",\n    value=\"option_value\",\n    description=\"Optional description\",\n)\n</code></pre> Field Type Description <code>label</code> <code>str</code> Display text <code>value</code> <code>str</code> Option value <code>description</code> <code>str</code> Optional description"},{"location":"api-reference/models/#clan-channel-models","title":"Clan &amp; Channel Models","text":""},{"location":"api-reference/models/#apiclandesc","title":"ApiClanDesc","text":"<p>Clan description/info.</p> Field Type Description <code>clan_id</code> <code>str</code> Clan ID <code>clan_name</code> <code>str</code> Clan name <code>creator_id</code> <code>str</code> Creator user ID <code>logo</code> <code>str</code> Logo URL <code>banner</code> <code>str</code> Banner URL"},{"location":"api-reference/models/#apichanneldescription","title":"ApiChannelDescription","text":"<p>Channel description/info.</p> Field Type Description <code>channel_id</code> <code>str</code> Channel ID <code>channel_label</code> <code>str</code> Channel name <code>channel_type</code> <code>int</code> Channel type <code>clan_id</code> <code>str</code> Parent clan ID <code>category_id</code> <code>str</code> Parent category ID"},{"location":"api-reference/models/#apivoicechanneluserlist","title":"ApiVoiceChannelUserList","text":"<p>Voice channel user list.</p> Field Type Description <code>voice_channel_users</code> <code>List</code> List of users in voice"},{"location":"api-reference/models/#session-models","title":"Session Models","text":""},{"location":"api-reference/models/#apisession","title":"ApiSession","text":"<p>Authentication session.</p> Field Type Description <code>token</code> <code>str</code> JWT access token <code>refresh_token</code> <code>str</code> Refresh token <code>created</code> <code>bool</code> Whether newly created"},{"location":"api-reference/models/#usage-example","title":"Usage Example","text":"<pre><code>from mezon.models import (\n    ChannelMessageContent,\n    ApiMessageMention,\n    ApiMessageAttachment,\n    ApiSentTokenRequest,\n    SelectFieldOption,\n)\n\n# Send message with mentions and attachments\nawait channel.send(\n    content=ChannelMessageContent(t=\"Hello @user!\"),\n    mentions=[ApiMessageMention(user_id=\"123\")],\n    attachments=[\n        ApiMessageAttachment(\n            url=\"https://example.com/image.png\",\n            filename=\"image.png\"\n        )\n    ]\n)\n\n# Send tokens\nawait client.send_token(\n    ApiSentTokenRequest(\n        receiver_id=\"user_id\",\n        amount=10,\n        note=\"Reward!\"\n    )\n)\n</code></pre>"},{"location":"examples/advanced/","title":"Advanced Patterns","text":"<p>Advanced usage patterns and best practices.</p>"},{"location":"examples/advanced/#custom-reconnection-logic","title":"Custom Reconnection Logic","text":"<pre><code>from mezon.socket import Socket\n\nsocket = Socket(host=\"gw.mezon.ai\", port=\"443\", use_ssl=True)\n\nasync def on_heartbeat_timeout():\n    print(\"Connection lost - reconnecting...\")\n    # Custom reconnection logic\n\nsocket.onheartbeattimeout = on_heartbeat_timeout\n</code></pre>"},{"location":"examples/advanced/#command-framework","title":"Command Framework","text":"<p>Build a simple command framework:</p> <pre><code>import json\nfrom dataclasses import dataclass\nfrom typing import Callable, Dict\n\n@dataclass\nclass CommandContext:\n    message: any\n    client: any\n    channel: any\n    args: list\n\nclass CommandHandler:\n    def __init__(self, client):\n        self.client = client\n        self.commands: Dict[str, Callable] = {}\n        self.prefix = \"!\"\n\n    def command(self, name: str):\n        def decorator(func):\n            self.commands[name] = func\n            return func\n        return decorator\n\n    async def handle(self, message):\n        if message.sender_id == self.client.client_id:\n            return\n\n        content = json.loads(message.content)\n        text = content.get(\"t\", \"\").strip()\n\n        if not text.startswith(self.prefix):\n            return\n\n        parts = text[len(self.prefix):].split()\n        if not parts:\n            return\n\n        cmd_name = parts[0].lower()\n        args = parts[1:]\n\n        if cmd_name in self.commands:\n            channel = await self.client.channels.fetch(message.channel_id)\n            ctx = CommandContext(\n                message=message,\n                client=self.client,\n                channel=channel,\n                args=args,\n            )\n            await self.commands[cmd_name](ctx)\n\n# Usage\nhandler = CommandHandler(client)\n\n@handler.command(\"ping\")\nasync def ping(ctx: CommandContext):\n    await ctx.channel.send(content=ChannelMessageContent(t=\"Pong!\"))\n\n@handler.command(\"echo\")\nasync def echo(ctx: CommandContext):\n    text = \" \".join(ctx.args) or \"Nothing to echo\"\n    await ctx.channel.send(content=ChannelMessageContent(t=text))\n\nclient.on_channel_message(handler.handle)\n</code></pre>"},{"location":"examples/advanced/#conversation-state","title":"Conversation State","text":"<p>Track conversation state per user:</p> <pre><code>from typing import Dict, Optional\nfrom dataclasses import dataclass, field\nfrom datetime import datetime\n\n@dataclass\nclass UserState:\n    step: str = \"start\"\n    data: Dict = field(default_factory=dict)\n    expires: Optional[datetime] = None\n\nclass ConversationManager:\n    def __init__(self):\n        self.states: Dict[str, UserState] = {}\n\n    def get(self, user_id: str) -&gt; UserState:\n        return self.states.get(user_id, UserState())\n\n    def set(self, user_id: str, state: UserState):\n        self.states[user_id] = state\n\n    def clear(self, user_id: str):\n        self.states.pop(user_id, None)\n\n# Usage\nconversations = ConversationManager()\n\nasync def handle_message(message):\n    if message.sender_id == client.client_id:\n        return\n\n    user_id = message.sender_id\n    state = conversations.get(user_id)\n    content = json.loads(message.content)\n    text = content.get(\"t\", \"\")\n    channel = await client.channels.fetch(message.channel_id)\n\n    if text == \"!survey\":\n        # Start survey\n        state.step = \"name\"\n        conversations.set(user_id, state)\n        await channel.send(content=ChannelMessageContent(t=\"What's your name?\"))\n\n    elif state.step == \"name\":\n        state.data[\"name\"] = text\n        state.step = \"age\"\n        conversations.set(user_id, state)\n        await channel.send(content=ChannelMessageContent(t=\"How old are you?\"))\n\n    elif state.step == \"age\":\n        state.data[\"age\"] = text\n        conversations.clear(user_id)\n        name = state.data[\"name\"]\n        age = state.data[\"age\"]\n        await channel.send(\n            content=ChannelMessageContent(t=f\"Thanks {name}! You're {age} years old.\")\n        )\n\nclient.on_channel_message(handle_message)\n</code></pre>"},{"location":"examples/advanced/#scheduled-tasks","title":"Scheduled Tasks","text":"<p>Run periodic tasks:</p> <pre><code>import asyncio\nfrom datetime import datetime\n\nasync def daily_announcement():\n    while True:\n        now = datetime.now()\n        # Run at 9 AM\n        if now.hour == 9 and now.minute == 0:\n            channel = await client.channels.fetch(\"announcement_channel_id\")\n            await channel.send(\n                content=ChannelMessageContent(t=\"Good morning everyone!\")\n            )\n        await asyncio.sleep(60)  # Check every minute\n\nasync def main():\n    await client.login()\n\n    # Start scheduled task\n    asyncio.create_task(daily_announcement())\n\n    await asyncio.Event().wait()\n</code></pre>"},{"location":"examples/advanced/#error-handling-middleware","title":"Error Handling Middleware","text":"<pre><code>import traceback\nfrom functools import wraps\n\ndef error_handler(func):\n    @wraps(func)\n    async def wrapper(*args, **kwargs):\n        try:\n            return await func(*args, **kwargs)\n        except Exception as e:\n            print(f\"Error in {func.__name__}: {e}\")\n            traceback.print_exc()\n            # Optionally notify admin\n    return wrapper\n\n@error_handler\nasync def handle_message(message):\n    # Your logic here\n    pass\n\nclient.on_channel_message(handle_message)\n</code></pre>"},{"location":"examples/advanced/#caching-api-responses","title":"Caching API Responses","text":"<pre><code>from functools import lru_cache\nfrom datetime import datetime, timedelta\n\nclass TTLCache:\n    def __init__(self, ttl_seconds: int = 300):\n        self.cache = {}\n        self.ttl = ttl_seconds\n\n    def get(self, key: str):\n        if key in self.cache:\n            value, expires = self.cache[key]\n            if datetime.now() &lt; expires:\n                return value\n            del self.cache[key]\n        return None\n\n    def set(self, key: str, value):\n        expires = datetime.now() + timedelta(seconds=self.ttl)\n        self.cache[key] = (value, expires)\n\n# Usage\nrole_cache = TTLCache(ttl_seconds=300)\n\nasync def get_user_roles(clan_id: str):\n    cached = role_cache.get(clan_id)\n    if cached:\n        return cached\n\n    clan = await client.clans.get(clan_id)\n    roles = await clan.list_roles()\n    role_cache.set(clan_id, roles)\n    return roles\n</code></pre>"},{"location":"examples/advanced/#plugin-system","title":"Plugin System","text":"<pre><code>from abc import ABC, abstractmethod\nfrom typing import List\n\nclass Plugin(ABC):\n    @abstractmethod\n    async def on_message(self, client, message):\n        pass\n\n    @abstractmethod\n    def get_commands(self) -&gt; List[str]:\n        pass\n\nclass GreetingPlugin(Plugin):\n    async def on_message(self, client, message):\n        content = json.loads(message.content)\n        text = content.get(\"t\", \"\")\n        if text == \"!hi\":\n            channel = await client.channels.fetch(message.channel_id)\n            await channel.send(content=ChannelMessageContent(t=\"Hello!\"))\n\n    def get_commands(self) -&gt; List[str]:\n        return [\"!hi\"]\n\nclass PluginManager:\n    def __init__(self, client):\n        self.client = client\n        self.plugins: List[Plugin] = []\n\n    def register(self, plugin: Plugin):\n        self.plugins.append(plugin)\n\n    async def handle_message(self, message):\n        for plugin in self.plugins:\n            await plugin.on_message(self.client, message)\n\n# Usage\nplugins = PluginManager(client)\nplugins.register(GreetingPlugin())\nclient.on_channel_message(plugins.handle_message)\n</code></pre>"},{"location":"examples/basic-bot/","title":"Basic Bot Example","text":"<p>A standalone bot that responds to commands.</p>"},{"location":"examples/basic-bot/#full-example","title":"Full Example","text":"<pre><code>import asyncio\nimport json\nimport logging\nimport signal\nfrom mezon import MezonClient, ButtonBuilder, ButtonMessageStyle\nfrom mezon.models import ChannelMessageContent, ApiSentTokenRequest\nfrom mezon.protobuf.api import api_pb2\n\n# Initialize client\nclient = MezonClient(\n    client_id=\"YOUR_BOT_ID\",\n    api_key=\"YOUR_API_KEY\",\n    enable_logging=True,\n    log_level=logging.INFO,\n)\n\n# Command handlers\nasync def handle_message(message: api_pb2.ChannelMessage):\n    # Ignore bot's own messages\n    if message.sender_id == client.client_id:\n        return\n\n    # Parse content\n    content = json.loads(message.content)\n    text = content.get(\"t\", \"\").strip()\n\n    # Get channel for responses\n    channel = await client.channels.fetch(message.channel_id)\n    msg = channel.messages.get(message.message_id)\n\n    # Command: !help\n    if text == \"!help\":\n        help_text = \"\"\"**Available Commands:**\n- `!help` - Show this message\n- `!ping` - Check bot latency\n- `!hello` - Get a greeting\n- `!tip @user` - Send tokens to a user\n- `!poll` - Create a simple poll\"\"\"\n\n        await msg.reply(content=ChannelMessageContent(t=help_text))\n\n    # Command: !ping\n    elif text == \"!ping\":\n        await msg.reply(content=ChannelMessageContent(t=\"Pong!\"))\n\n    # Command: !hello\n    elif text == \"!hello\":\n        await channel.send_ephemeral(\n            receiver_id=message.sender_id,\n            content=ChannelMessageContent(text=\"Hello! This is a private message.\")\n        )\n        await msg.reply(content=ChannelMessageContent(t=f\"Hello &lt;@{message.sender_id}&gt;!\"))\n\n    # Command: !tip\n    elif text.startswith(\"!tip\"):\n        # Extract mentioned user\n        mentions = content.get(\"mentions\", [])\n        if not mentions:\n            await msg.reply(content=ChannelMessageContent(t=\"Usage: !tip @user\"))\n            return\n\n        receiver_id = mentions[0].get(\"user_id\")\n        result = await client.send_token(\n            ApiSentTokenRequest(\n                receiver_id=receiver_id,\n                amount=1,\n                note=\"Tip from bot!\",\n            )\n        )\n\n        if result.ok:\n            await msg.reply(content=ChannelMessageContent(t=\"Token sent!\"))\n        else:\n            await msg.reply(content=ChannelMessageContent(t=f\"Failed: {result.error}\"))\n\n    # Command: !poll\n    elif text == \"!poll\":\n        buttons = ButtonBuilder()\n        buttons.add_button(\"vote_yes\", \"Yes\", ButtonMessageStyle.SUCCESS)\n        buttons.add_button(\"vote_no\", \"No\", ButtonMessageStyle.DANGER)\n        buttons.add_button(\"vote_maybe\", \"Maybe\", ButtonMessageStyle.SECONDARY)\n\n        await channel.send(\n            content=ChannelMessageContent(\n                t=\"**Quick Poll:** Do you like this bot?\",\n                components=[{\"components\": buttons.build()}]\n            )\n        )\n\n# Handle button clicks\nasync def handle_button(event):\n    button_id = event.button_id\n    user_id = event.user_id\n    channel = await client.channels.fetch(event.channel_id)\n\n    if button_id.startswith(\"vote_\"):\n        vote = button_id.replace(\"vote_\", \"\")\n        await channel.send_ephemeral(\n            receiver_id=user_id,\n            content=ChannelMessageContent(text=f\"You voted: {vote}\")\n        )\n\n# Register handlers\nclient.on_channel_message(handle_message)\nclient.on_message_button_clicked(handle_button)\n\n# Graceful shutdown\nasync def shutdown():\n    print(\"Shutting down...\")\n    if client.socket_manager:\n        await client.socket_manager.disconnect()\n\nasync def main():\n    await client.login()\n    print(f\"Bot is running as {client.client_id}\")\n\n    # Handle signals\n    loop = asyncio.get_event_loop()\n    for sig in (signal.SIGTERM, signal.SIGINT):\n        loop.add_signal_handler(sig, lambda: asyncio.create_task(shutdown()))\n\n    await asyncio.Event().wait()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"examples/basic-bot/#running-the-bot","title":"Running the Bot","text":"<ol> <li>Replace <code>YOUR_BOT_ID</code> and <code>YOUR_API_KEY</code> with your credentials</li> <li>Run: <code>python bot.py</code></li> <li>Test commands in a Mezon channel</li> </ol>"},{"location":"examples/basic-bot/#using-environment-variables","title":"Using Environment Variables","text":"<pre><code>import os\n\nclient = MezonClient(\n    client_id=os.environ[\"MEZON_BOT_ID\"],\n    api_key=os.environ[\"MEZON_API_KEY\"],\n)\n</code></pre> <p>Run with:</p> <pre><code>MEZON_BOT_ID=your_id MEZON_API_KEY=your_key python bot.py\n</code></pre>"},{"location":"examples/fastapi/","title":"FastAPI Integration","text":"<p>Integrate your Mezon bot with a FastAPI web application.</p>"},{"location":"examples/fastapi/#full-example","title":"Full Example","text":"<pre><code>from contextlib import asynccontextmanager\nimport json\nimport logging\nfrom fastapi import FastAPI\nfrom fastapi.responses import JSONResponse\nfrom mezon import MezonClient\nfrom mezon.models import ChannelMessageContent, ApiSentTokenRequest\nfrom mezon.protobuf.api import api_pb2\nfrom mezon.protobuf.rtapi import realtime_pb2\n\n# Initialize client\nclient = MezonClient(\n    client_id=\"YOUR_BOT_ID\",\n    api_key=\"YOUR_API_KEY\",\n    enable_logging=True,\n    log_level=logging.INFO,\n)\n\n# Message handler\nasync def handle_message(message: api_pb2.ChannelMessage):\n    if message.sender_id == client.client_id:\n        return\n\n    content = json.loads(message.content)\n    text = content.get(\"t\", \"\")\n\n    if text.startswith(\"!hello\"):\n        channel = await client.channels.fetch(message.channel_id)\n        await channel.send(content=ChannelMessageContent(t=\"Hello from FastAPI bot!\"))\n\n# Channel events\nasync def on_channel_created(event: realtime_pb2.ChannelCreatedEvent):\n    print(f\"Channel created: {event.channel_id}\")\n\nasync def on_user_joined(event: realtime_pb2.UserChannelAdded):\n    print(f\"User {event.user_id} joined channel {event.channel_id}\")\n\n# Register handlers\nclient.on_channel_message(handle_message)\nclient.on_channel_created(on_channel_created)\nclient.on_user_channel_added(on_user_joined)\n\n# FastAPI lifespan\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # Startup\n    print(\"Connecting to Mezon...\")\n    await client.login()\n    print(\"Connected!\")\n\n    yield\n\n    # Shutdown\n    print(\"Disconnecting...\")\n    if client.socket_manager:\n        await client.socket_manager.disconnect()\n    print(\"Disconnected!\")\n\napp = FastAPI(lifespan=lifespan)\n\n# API endpoints\n@app.get(\"/health\")\nasync def health():\n    return {\"status\": \"healthy\"}\n\n@app.get(\"/clan/{clan_id}/voice-users\")\nasync def get_voice_users(clan_id: str):\n    \"\"\"List users in voice channels\"\"\"\n    clan = await client.clans.get(clan_id)\n    voice_users = await clan.list_channel_voice_users()\n    return {\"voice_users\": voice_users}\n\n@app.post(\"/channel/{channel_id}/send\")\nasync def send_message(channel_id: str, text: str):\n    \"\"\"Send a message to a channel\"\"\"\n    channel = await client.channels.fetch(channel_id)\n    result = await channel.send(content=ChannelMessageContent(t=text))\n    return {\"message_id\": result.message_id}\n\n@app.post(\"/user/{user_id}/tip\")\nasync def tip_user(user_id: str, amount: int = 1, note: str = \"Tip\"):\n    \"\"\"Send tokens to a user\"\"\"\n    result = await client.send_token(\n        ApiSentTokenRequest(\n            receiver_id=user_id,\n            amount=amount,\n            note=note,\n        )\n    )\n    return {\"success\": result.ok, \"tx_hash\": result.tx_hash if result.ok else None}\n\n@app.get(\"/clan/{clan_id}/roles\")\nasync def get_roles(clan_id: str):\n    \"\"\"List roles in a clan\"\"\"\n    clan = await client.clans.get(clan_id)\n    roles = await clan.list_roles()\n    return {\"roles\": roles}\n</code></pre>"},{"location":"examples/fastapi/#running","title":"Running","text":"<pre><code>uvicorn main:app --reload\n</code></pre> <p>Access:</p> <ul> <li>API docs: http://localhost:8000/docs</li> <li>Health check: http://localhost:8000/health</li> </ul>"},{"location":"examples/fastapi/#project-structure","title":"Project Structure","text":"<pre><code>my-bot/\n\u251c\u2500\u2500 main.py          # FastAPI app + Mezon client\n\u251c\u2500\u2500 handlers/\n\u2502   \u251c\u2500\u2500 messages.py  # Message handlers\n\u2502   \u2514\u2500\u2500 events.py    # Event handlers\n\u251c\u2500\u2500 api/\n\u2502   \u2514\u2500\u2500 routes.py    # API routes\n\u2514\u2500\u2500 requirements.txt\n</code></pre>"},{"location":"examples/fastapi/#modular-example","title":"Modular Example","text":""},{"location":"examples/fastapi/#handlersmessagespy","title":"handlers/messages.py","text":"<pre><code>import json\nfrom mezon.models import ChannelMessageContent\n\nasync def handle_message(client, message):\n    if message.sender_id == client.client_id:\n        return\n\n    content = json.loads(message.content)\n    text = content.get(\"t\", \"\")\n\n    if text == \"!ping\":\n        channel = await client.channels.fetch(message.channel_id)\n        await channel.send(content=ChannelMessageContent(t=\"Pong!\"))\n</code></pre>"},{"location":"examples/fastapi/#mainpy","title":"main.py","text":"<pre><code>from handlers.messages import handle_message\n\n# Wrap handler to pass client\nclient.on_channel_message(lambda msg: handle_message(client, msg))\n</code></pre>"},{"location":"examples/fastapi/#production-tips","title":"Production Tips","text":"<ol> <li>Use environment variables for credentials</li> <li>Add error handling around API calls</li> <li>Implement rate limiting on API endpoints</li> <li>Use structured logging for debugging</li> <li>Add authentication to sensitive endpoints</li> </ol> <pre><code>import os\nfrom fastapi import Depends, HTTPException\nfrom fastapi.security import APIKeyHeader\n\napi_key_header = APIKeyHeader(name=\"X-API-Key\")\n\nasync def verify_api_key(api_key: str = Depends(api_key_header)):\n    if api_key != os.environ.get(\"API_KEY\"):\n        raise HTTPException(status_code=403, detail=\"Invalid API key\")\n\n@app.post(\"/channel/{channel_id}/send\", dependencies=[Depends(verify_api_key)])\nasync def send_message(channel_id: str, text: str):\n    # ...\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10 or higher</li> </ul>"},{"location":"getting-started/installation/#using-pip","title":"Using pip","text":"<pre><code>pip install mezon-sdk\n</code></pre>"},{"location":"getting-started/installation/#using-uv-recommended","title":"Using uv (Recommended)","text":"<p>uv is a fast Python package installer.</p> <pre><code>uv pip install mezon-sdk\n</code></pre>"},{"location":"getting-started/installation/#using-poetry","title":"Using Poetry","text":"<pre><code>poetry add mezon-sdk\n</code></pre>"},{"location":"getting-started/installation/#dependencies","title":"Dependencies","text":"<p>The SDK automatically installs these dependencies:</p> Package Version Purpose pydantic &gt;=2.12.3 Data validation and settings aiohttp &gt;=3.9.0 Async HTTP client websockets &gt;=12.0 WebSocket protocol protobuf &gt;=4.25.0 Protocol Buffers serialization pyjwt &gt;=2.8.0 JWT token handling aiosqlite &gt;=0.20.0 Async SQLite for message caching"},{"location":"getting-started/installation/#development-installation","title":"Development Installation","text":"<p>To contribute or develop with the SDK:</p> <pre><code># Clone the repository\ngit clone https://github.com/phuvinh010701/mezon-sdk-python.git\ncd mezon-sdk-python\n\n# Install with dev dependencies\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>import mezon\nprint(mezon.__version__)\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Once installed, head to the Quick Start guide to build your first bot.</p>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Build your first Mezon bot in minutes.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Mezon Bot ID and API Key (obtain from Mezon platform)</li> <li>Python 3.10+</li> <li><code>mezon-sdk</code> installed</li> </ul>"},{"location":"getting-started/quickstart/#basic-bot","title":"Basic Bot","text":"<p>Create a file <code>bot.py</code>:</p> <pre><code>import asyncio\nimport json\nfrom mezon import MezonClient\nfrom mezon.models import ChannelMessageContent\nfrom mezon.protobuf.api import api_pb2\n\n# Initialize the client\nclient = MezonClient(\n    client_id=\"YOUR_BOT_ID\",\n    api_key=\"YOUR_API_KEY\",\n)\n\n# Handle incoming messages\nasync def handle_message(message: api_pb2.ChannelMessage):\n    # Ignore messages from the bot itself\n    if message.sender_id == client.client_id:\n        return\n\n    # Parse message content\n    message_content = json.loads(message.content)\n    text = message_content.get(\"t\", \"\")\n\n    # Respond to !hello command\n    if text.startswith(\"!hello\"):\n        channel = await client.channels.fetch(message.channel_id)\n        await channel.send(\n            content=ChannelMessageContent(t=\"Hello! I'm a Mezon bot\")\n        )\n\n# Register the event handler\nclient.on_channel_message(handle_message)\n\n# Run the bot\nasync def main():\n    await client.login()\n    print(\"Bot is running...\")\n    await asyncio.Event().wait()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>Run your bot:</p> <pre><code>python bot.py\n</code></pre>"},{"location":"getting-started/quickstart/#whats-happening","title":"What's Happening?","text":"<ol> <li><code>MezonClient</code> - The main entry point that handles authentication and connections</li> <li><code>client.login()</code> - Authenticates with the Mezon API and establishes a WebSocket connection</li> <li><code>client.on_channel_message()</code> - Registers a handler for incoming messages</li> <li><code>client.channels.fetch()</code> - Gets a channel object to send messages</li> <li><code>channel.send()</code> - Sends a message to the channel</li> </ol>"},{"location":"getting-started/quickstart/#adding-more-features","title":"Adding More Features","text":""},{"location":"getting-started/quickstart/#reply-to-messages","title":"Reply to Messages","text":"<pre><code>async def handle_message(message: api_pb2.ChannelMessage):\n    if message.sender_id == client.client_id:\n        return\n\n    channel = await client.channels.fetch(message.channel_id)\n    msg = channel.messages.get(message.message_id)\n    await msg.reply(content=ChannelMessageContent(t=\"Got your message!\"))\n</code></pre>"},{"location":"getting-started/quickstart/#send-ephemeral-messages","title":"Send Ephemeral Messages","text":"<p>Ephemeral messages are only visible to a specific user:</p> <pre><code>await channel.send_ephemeral(\n    receiver_id=message.sender_id,\n    content=ChannelMessageContent(text=\"Only you can see this!\")\n)\n</code></pre>"},{"location":"getting-started/quickstart/#handle-multiple-events","title":"Handle Multiple Events","text":"<pre><code>from mezon.protobuf.rtapi import realtime_pb2\n\nasync def on_channel_created(event: realtime_pb2.ChannelCreatedEvent):\n    print(f\"New channel: {event.channel_id}\")\n\nasync def on_user_joined(event: realtime_pb2.UserChannelAdded):\n    print(f\"User {event.user_id} joined {event.channel_id}\")\n\nclient.on_channel_created(on_channel_created)\nclient.on_user_channel_added(on_user_joined)\n</code></pre>"},{"location":"getting-started/quickstart/#environment-variables","title":"Environment Variables","text":"<p>For production, use environment variables:</p> <pre><code>import os\n\nclient = MezonClient(\n    client_id=os.environ[\"MEZON_BOT_ID\"],\n    api_key=os.environ[\"MEZON_API_KEY\"],\n)\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Event Handling - Learn about all available events</li> <li>Sending Messages - Advanced messaging features</li> <li>Interactive Messages - Buttons and forms</li> <li>FastAPI Integration - Build a web API with your bot</li> </ul>"},{"location":"guide/caching/","title":"Message Caching","text":"<p>The SDK includes built-in message caching using async SQLite for better performance.</p>"},{"location":"guide/caching/#how-it-works","title":"How It Works","text":"<p>Messages are automatically cached to a local SQLite database when received:</p> <ul> <li>Faster Retrieval - Cached messages load instantly</li> <li>Offline Access - Access previously received messages offline</li> <li>Non-blocking - All operations are async</li> <li>Automatic - Handled by the SDK automatically</li> </ul>"},{"location":"guide/caching/#database-location","title":"Database Location","text":"<p>Default location:</p> <pre><code>./mezon-cache/mezon-messages-cache.db\n</code></pre>"},{"location":"guide/caching/#custom-location","title":"Custom Location","text":"<pre><code>from mezon.messages.db import MessageDB\n\n# Custom path\nmessage_db = MessageDB(db_path=\"./custom-path/messages.db\")\n</code></pre>"},{"location":"guide/caching/#working-with-cached-messages","title":"Working with Cached Messages","text":"<pre><code>from mezon.messages.db import MessageDB\n\nasync def work_with_cache():\n    async with MessageDB() as db:\n        # Get messages by channel\n        messages = await db.get_messages_by_channel(\n            channel_id=\"channel_123\",\n            limit=50,\n            offset=0\n        )\n\n        # Get specific message\n        message = await db.get_message_by_id(\n            message_id=\"msg_456\",\n            channel_id=\"channel_123\"\n        )\n\n        # Count messages\n        count = await db.get_message_count(channel_id=\"channel_123\")\n        total = await db.get_message_count()  # All messages\n\n        # Clear channel messages\n        deleted = await db.clear_channel_messages(\"channel_123\")\n\n        # Delete specific message\n        success = await db.delete_message(\"msg_456\", \"channel_123\")\n</code></pre>"},{"location":"guide/caching/#messagedb-methods","title":"MessageDB Methods","text":"Method Description <code>get_messages_by_channel(channel_id, limit, offset)</code> Get messages from a channel <code>get_message_by_id(message_id, channel_id)</code> Get a specific message <code>get_message_count(channel_id=None)</code> Count messages <code>clear_channel_messages(channel_id)</code> Delete all messages in a channel <code>delete_message(message_id, channel_id)</code> Delete a specific message"},{"location":"guide/caching/#performance-benefits","title":"Performance Benefits","text":"<p>Using <code>aiosqlite</code> provides:</p> <ul> <li>Non-blocking I/O - Database operations don't block the event loop</li> <li>Concurrent Operations - Multiple database operations can run concurrently</li> <li>Lazy Connection - Connection established only when needed</li> <li>Auto-cleanup - Context manager handles cleanup</li> </ul>"},{"location":"guide/caching/#example-search-cached-messages","title":"Example: Search Cached Messages","text":"<pre><code>from mezon.messages.db import MessageDB\n\nasync def search_messages(channel_id: str, keyword: str):\n    async with MessageDB() as db:\n        messages = await db.get_messages_by_channel(\n            channel_id=channel_id,\n            limit=1000\n        )\n\n        matching = [\n            msg for msg in messages\n            if keyword.lower() in msg.content.lower()\n        ]\n\n        return matching\n</code></pre>"},{"location":"guide/caching/#cache-with-message-handling","title":"Cache with Message Handling","text":"<pre><code>from mezon.messages.db import MessageDB\nfrom mezon.protobuf.api import api_pb2\n\nasync def handle_message(message: api_pb2.ChannelMessage):\n    # Message is automatically cached by the SDK\n\n    # Later, retrieve from cache\n    async with MessageDB() as db:\n        cached = await db.get_message_by_id(\n            message_id=message.message_id,\n            channel_id=message.channel_id\n        )\n        if cached:\n            print(f\"Found in cache: {cached.content}\")\n\nclient.on_channel_message(handle_message)\n</code></pre>"},{"location":"guide/channels/","title":"Channels","text":"<p>Working with channels in the Mezon SDK.</p>"},{"location":"guide/channels/#fetching-channels","title":"Fetching Channels","text":""},{"location":"guide/channels/#from-client","title":"From Client","text":"<pre><code># Fetch a channel by ID\nchannel = await client.channels.fetch(\"channel_id\")\n\nprint(f\"Channel: {channel.name}\")\nprint(f\"Type: {channel.channel_type}\")\n</code></pre>"},{"location":"guide/channels/#from-clan","title":"From Clan","text":"<pre><code># Get a clan\nclan = await client.clans.get(\"clan_id\")\n\n# Load all channels in the clan\nawait clan.load_channels()\n\n# Get a specific channel\nchannel = await clan.channels.get(\"channel_id\")\n</code></pre>"},{"location":"guide/channels/#channel-properties","title":"Channel Properties","text":"<pre><code>channel.id           # Channel ID\nchannel.name         # Channel name\nchannel.channel_type # Type of channel\nchannel.is_private   # Whether the channel is private\nchannel.messages     # Message cache manager\n</code></pre>"},{"location":"guide/channels/#sending-messages","title":"Sending Messages","text":"<p>See the Messaging Guide for details.</p> <pre><code>from mezon.models import ChannelMessageContent\n\n# Send a message\nawait channel.send(content=ChannelMessageContent(t=\"Hello!\"))\n\n# Send ephemeral message\nawait channel.send_ephemeral(\n    receiver_id=\"user_id\",\n    content=ChannelMessageContent(text=\"Private message\")\n)\n</code></pre>"},{"location":"guide/channels/#accessing-messages","title":"Accessing Messages","text":"<pre><code># Get a message by ID\nmessage = channel.messages.get(\"message_id\")\n\n# Reply to it\nawait message.reply(content=ChannelMessageContent(t=\"Reply!\"))\n\n# Update it\nawait message.update(content=ChannelMessageContent(t=\"Updated!\"))\n</code></pre>"},{"location":"guide/channels/#channel-types","title":"Channel Types","text":"<p>The SDK supports various channel types:</p> <pre><code>from mezon.constants import ChannelType\n\nChannelType.TEXT           # Text channel\nChannelType.VOICE          # Voice channel\nChannelType.DM             # Direct message\nChannelType.GROUP_DM       # Group direct message\nChannelType.CATEGORY       # Category (container for channels)\nChannelType.ANNOUNCEMENT   # Announcement channel\nChannelType.FORUM          # Forum channel\n</code></pre>"},{"location":"guide/channels/#dm-channels","title":"DM Channels","text":""},{"location":"guide/channels/#send-dm-to-user","title":"Send DM to User","text":"<pre><code># Get user\nuser = await client.users.get(\"user_id\")\n\n# Send DM\nawait user.send_dm_message(\n    content=ChannelMessageContent(t=\"Hello via DM!\")\n)\n</code></pre>"},{"location":"guide/channels/#using-channel-manager","title":"Using Channel Manager","text":"<pre><code># Get DM channel\ndm_channel = await client.channel_manager.get_dm_channel(\"user_id\")\n\n# Send message\nawait dm_channel.send(content=ChannelMessageContent(t=\"Hello!\"))\n</code></pre>"},{"location":"guide/channels/#channel-events","title":"Channel Events","text":"<p>Listen for channel-related events:</p> <pre><code>from mezon.protobuf.rtapi import realtime_pb2\n\nasync def on_channel_created(event: realtime_pb2.ChannelCreatedEvent):\n    print(f\"New channel: {event.channel_id}\")\n    # Fetch the new channel\n    channel = await client.channels.fetch(event.channel_id)\n\nasync def on_channel_updated(event: realtime_pb2.ChannelUpdatedEvent):\n    print(f\"Channel updated: {event.channel_id}\")\n\nasync def on_channel_deleted(event: realtime_pb2.ChannelDeletedEvent):\n    print(f\"Channel deleted: {event.channel_id}\")\n\nclient.on_channel_created(on_channel_created)\nclient.on_channel_updated(on_channel_updated)\nclient.on_channel_deleted(on_channel_deleted)\n</code></pre>"},{"location":"guide/channels/#user-presence-in-channels","title":"User Presence in Channels","text":"<pre><code>async def on_user_joined(event: realtime_pb2.UserChannelAdded):\n    print(f\"User {event.user_id} joined {event.channel_id}\")\n\nasync def on_user_left(event: realtime_pb2.UserChannelRemoved):\n    print(f\"User {event.user_id} left {event.channel_id}\")\n\nclient.on_user_channel_added(on_user_joined)\nclient.on_user_channel_removed(on_user_left)\n</code></pre>"},{"location":"guide/clans/","title":"Clans","text":"<p>Working with clans (servers/communities) in the Mezon SDK.</p>"},{"location":"guide/clans/#accessing-clans","title":"Accessing Clans","text":"<pre><code># Get a clan by ID\nclan = await client.clans.get(\"clan_id\")\n\nprint(f\"Clan: {clan.name}\")\nprint(f\"ID: {clan.id}\")\n</code></pre>"},{"location":"guide/clans/#clan-properties","title":"Clan Properties","text":"<pre><code>clan.id        # Clan ID\nclan.name      # Clan name\nclan.channels  # Channel manager for the clan\nclan.users     # User manager for the clan\n</code></pre>"},{"location":"guide/clans/#loading-channels","title":"Loading Channels","text":"<p>Load all channels in a clan:</p> <pre><code># Load channels\nawait clan.load_channels()\n\n# Access a channel\nchannel = await clan.channels.get(\"channel_id\")\n</code></pre>"},{"location":"guide/clans/#voice-users","title":"Voice Users","text":"<p>List users in voice channels:</p> <pre><code># List all voice users in the clan\nvoice_users = await clan.list_channel_voice_users()\n\n# With specific channel\nvoice_users = await clan.list_channel_voice_users(\n    channel_id=\"channel_id\",\n    limit=100\n)\n\nfor user in voice_users:\n    print(f\"User in voice: {user}\")\n</code></pre>"},{"location":"guide/clans/#roles","title":"Roles","text":""},{"location":"guide/clans/#list-roles","title":"List Roles","text":"<pre><code>roles = await clan.list_roles()\n\nfor role in roles:\n    print(f\"Role: {role.title}\")\n</code></pre>"},{"location":"guide/clans/#update-role","title":"Update Role","text":"<pre><code>await clan.update_role(\n    role_id=\"role_id\",\n    request={\n        \"title\": \"New Role Name\",\n        \"permissions\": [\"SEND_MESSAGE\", \"READ_MESSAGES\"]\n    }\n)\n</code></pre>"},{"location":"guide/clans/#clan-events","title":"Clan Events","text":"<p>Listen for clan-related events:</p> <pre><code>from mezon.protobuf.rtapi import realtime_pb2\n\n# User joined clan\nasync def on_user_joined_clan(event: realtime_pb2.AddClanUserEvent):\n    print(f\"User joined clan: {event.clan_id}\")\n    # Welcome the user\n    channel = await client.channels.fetch(\"welcome_channel_id\")\n    await channel.send(\n        content=ChannelMessageContent(t=f\"Welcome &lt;@{event.user_id}&gt;!\")\n    )\n\nclient.on_add_clan_user(on_user_joined_clan)\n\n# Clan updated\nasync def on_clan_updated(event):\n    print(f\"Clan settings changed\")\n\nclient.on(Events.CLAN_UPDATED_EVENT, on_clan_updated)\n\n# Clan event created\nasync def on_clan_event(event):\n    print(f\"New clan event created\")\n\nclient.on_clan_event_created(on_clan_event)\n</code></pre>"},{"location":"guide/clans/#user-clan-removal","title":"User Clan Removal","text":"<pre><code>async def on_user_left_clan(event: realtime_pb2.UserClanRemovedEvent):\n    print(f\"User {event.user_id} left clan {event.clan_id}\")\n\nclient.on(Events.USER_CLAN_REMOVED, on_user_left_clan)\n</code></pre>"},{"location":"guide/client/","title":"Client Configuration","text":"<p>The <code>MezonClient</code> is the main entry point for interacting with the Mezon platform.</p>"},{"location":"guide/client/#initialization","title":"Initialization","text":"<pre><code>from mezon import MezonClient\nimport logging\n\nclient = MezonClient(\n    client_id=\"YOUR_BOT_ID\",\n    api_key=\"YOUR_API_KEY\",\n    host=\"gw.mezon.ai\",      # Optional: API host\n    port=\"443\",               # Optional: API port\n    use_ssl=True,             # Optional: Use SSL\n    timeout=7000,             # Optional: Request timeout in ms\n    enable_logging=True,      # Optional: Enable logging\n    log_level=logging.INFO,   # Optional: Log level\n)\n</code></pre>"},{"location":"guide/client/#parameters","title":"Parameters","text":"Parameter Type Default Description <code>client_id</code> <code>str</code> Required Your bot's client ID <code>api_key</code> <code>str</code> Required Your API key <code>host</code> <code>str</code> <code>\"gw.mezon.ai\"</code> API host <code>port</code> <code>str</code> <code>\"443\"</code> API port <code>use_ssl</code> <code>bool</code> <code>True</code> Use SSL connection <code>timeout</code> <code>int</code> <code>7000</code> Request timeout in milliseconds <code>enable_logging</code> <code>bool</code> <code>False</code> Enable SDK logging <code>log_level</code> <code>int</code> <code>logging.INFO</code> Python logging level"},{"location":"guide/client/#authentication","title":"Authentication","text":"<p>Call <code>login()</code> to authenticate and establish connections:</p> <pre><code>async def main():\n    await client.login()\n    print(f\"Logged in as {client.client_id}\")\n</code></pre> <p>The login process:</p> <ol> <li>Authenticates with the Mezon API using your credentials</li> <li>Obtains a JWT session token</li> <li>Establishes a WebSocket connection for real-time events</li> <li>Initializes managers (session, socket, channel, event, cache)</li> </ol>"},{"location":"guide/client/#auto-reconnection","title":"Auto-Reconnection","text":"<p>By default, the client automatically reconnects if the connection is lost:</p> <pre><code>await client.login(enable_auto_reconnect=True)  # Default\n</code></pre> <p>To disable auto-reconnection:</p> <pre><code>await client.login(enable_auto_reconnect=False)\n</code></pre>"},{"location":"guide/client/#accessing-managers","title":"Accessing Managers","text":"<p>After login, you can access various managers:</p> <pre><code># Channel manager - fetch and manage channels\nchannel = await client.channels.fetch(\"channel_id\")\n\n# Clan manager - access clans\nclan = await client.clans.get(\"clan_id\")\n\n# Session manager - access session info\nsession = client.session_manager.get_session()\nprint(f\"Token: {session.token}\")\n\n# Socket manager - access WebSocket\nsocket = client.socket_manager.get_socket()\n</code></pre>"},{"location":"guide/client/#graceful-shutdown","title":"Graceful Shutdown","text":"<p>Always close connections when shutting down:</p> <pre><code>import signal\nimport asyncio\n\nasync def shutdown(client):\n    print(\"Shutting down...\")\n    if client.socket_manager:\n        await client.socket_manager.disconnect()\n\nasync def main():\n    client = MezonClient(client_id=\"...\", api_key=\"...\")\n    await client.login()\n\n    loop = asyncio.get_event_loop()\n    for sig in (signal.SIGTERM, signal.SIGINT):\n        loop.add_signal_handler(\n            sig,\n            lambda: asyncio.create_task(shutdown(client))\n        )\n\n    await asyncio.Event().wait()\n</code></pre>"},{"location":"guide/client/#timeout-configuration","title":"Timeout Configuration","text":"<p>Increase timeout for slow connections:</p> <pre><code>client = MezonClient(\n    client_id=\"...\",\n    api_key=\"...\",\n    timeout=15000  # 15 seconds\n)\n</code></pre>"},{"location":"guide/events/","title":"Event Handling","text":"<p>The SDK provides an event-driven architecture for handling real-time events from Mezon.</p>"},{"location":"guide/events/#registering-event-handlers","title":"Registering Event Handlers","text":""},{"location":"guide/events/#convenient-methods","title":"Convenient Methods","text":"<p>The client provides convenient methods for common events:</p> <pre><code>from mezon.protobuf.api import api_pb2\nfrom mezon.protobuf.rtapi import realtime_pb2\n\n# Message events\nasync def on_message(message: api_pb2.ChannelMessage):\n    print(f\"Message: {message.content}\")\n\nclient.on_channel_message(on_message)\n\n# Channel events\nasync def on_channel_created(event: realtime_pb2.ChannelCreatedEvent):\n    print(f\"Channel created: {event.channel_id}\")\n\nasync def on_channel_updated(event: realtime_pb2.ChannelUpdatedEvent):\n    print(f\"Channel updated: {event.channel_id}\")\n\nasync def on_channel_deleted(event: realtime_pb2.ChannelDeletedEvent):\n    print(f\"Channel deleted: {event.channel_id}\")\n\nclient.on_channel_created(on_channel_created)\nclient.on_channel_updated(on_channel_updated)\nclient.on_channel_deleted(on_channel_deleted)\n\n# User events\nasync def on_user_joined(event: realtime_pb2.UserChannelAdded):\n    print(f\"User {event.user_id} joined channel\")\n\nasync def on_user_left(event: realtime_pb2.UserChannelRemoved):\n    print(f\"User {event.user_id} left channel\")\n\nclient.on_user_channel_added(on_user_joined)\nclient.on_user_channel_removed(on_user_left)\n\n# Clan events\nasync def on_clan_user_added(event: realtime_pb2.AddClanUserEvent):\n    print(f\"User joined clan: {event.clan_id}\")\n\nclient.on_add_clan_user(on_clan_user_added)\n\n# Button clicks\nasync def on_button_click(event):\n    print(f\"Button clicked: {event}\")\n\nclient.on_message_button_clicked(on_button_click)\n\n# Notifications\nasync def on_notification(event):\n    print(f\"Notification: {event}\")\n\nclient.on_notification(on_notification)\n</code></pre>"},{"location":"guide/events/#generic-event-handler","title":"Generic Event Handler","text":"<p>For any event, use the <code>on()</code> method:</p> <pre><code>from mezon import Events\n\nasync def handler(data):\n    print(f\"Event received: {data}\")\n\nclient.on(Events.VOICE_STARTED_EVENT, handler)\nclient.on(Events.GIVE_COFFEE, handler)\n</code></pre>"},{"location":"guide/events/#available-events","title":"Available Events","text":""},{"location":"guide/events/#message-events","title":"Message Events","text":"Event Description <code>Events.CHANNEL_MESSAGE</code> New message in channel <code>Events.MESSAGE_REACTION</code> Reaction added/removed <code>Events.MESSAGE_TYPING_EVENT</code> User is typing <code>Events.MESSAGE_BUTTON_CLICKED</code> Button clicked"},{"location":"guide/events/#channel-events","title":"Channel Events","text":"Event Description <code>Events.CHANNEL_CREATED</code> Channel created <code>Events.CHANNEL_UPDATED</code> Channel updated <code>Events.CHANNEL_DELETED</code> Channel deleted <code>Events.CHANNEL_PRESENCE_EVENT</code> User presence in channel"},{"location":"guide/events/#user-events","title":"User Events","text":"Event Description <code>Events.USER_CHANNEL_ADDED</code> User added to channel <code>Events.USER_CHANNEL_REMOVED</code> User removed from channel <code>Events.USER_CLAN_REMOVED</code> User removed from clan <code>Events.ADD_CLAN_USER</code> User joined clan"},{"location":"guide/events/#voice-events","title":"Voice Events","text":"Event Description <code>Events.VOICE_STARTED_EVENT</code> Voice session started <code>Events.VOICE_ENDED_EVENT</code> Voice session ended <code>Events.VOICE_JOINED_EVENT</code> User joined voice <code>Events.VOICE_LEAVED_EVENT</code> User left voice"},{"location":"guide/events/#other-events","title":"Other Events","text":"Event Description <code>Events.CLAN_UPDATED_EVENT</code> Clan settings updated <code>Events.CLAN_EVENT_CREATED</code> Clan event created <code>Events.GIVE_COFFEE</code> Coffee given <code>Events.TOKEN_SEND</code> Token sent <code>Events.NOTIFICATION</code> Notification received"},{"location":"guide/events/#sync-vs-async-handlers","title":"Sync vs Async Handlers","text":"<p>Both sync and async handlers are supported:</p> <pre><code># Async handler (recommended)\nasync def async_handler(data):\n    await some_async_operation()\n    print(f\"Received: {data}\")\n\n# Sync handler\ndef sync_handler(data):\n    print(f\"Received: {data}\")\n\nclient.on(Events.GIVE_COFFEE, async_handler)\nclient.on(Events.GIVE_COFFEE, sync_handler)\n</code></pre>"},{"location":"guide/events/#handler-execution","title":"Handler Execution","text":"<p>Handlers are executed in a fire-and-forget manner. Exceptions in handlers are logged but don't affect other handlers:</p> <pre><code>async def handler(data):\n    raise Exception(\"This won't crash the bot\")\n\nclient.on_channel_message(handler)  # Error is logged, bot continues\n</code></pre>"},{"location":"guide/events/#multiple-handlers","title":"Multiple Handlers","text":"<p>You can register multiple handlers for the same event:</p> <pre><code>async def log_message(message):\n    print(f\"Log: {message.content}\")\n\nasync def process_message(message):\n    # Process the message\n    pass\n\nclient.on_channel_message(log_message)\nclient.on_channel_message(process_message)\n</code></pre> <p>Both handlers will be called for each message.</p>"},{"location":"guide/interactive/","title":"Interactive Messages","text":"<p>Create rich interactive messages with buttons, forms, and embeds.</p>"},{"location":"guide/interactive/#buttonbuilder","title":"ButtonBuilder","text":"<p>Create interactive buttons:</p> <pre><code>from mezon import ButtonBuilder, ButtonMessageStyle\nfrom mezon.models import ChannelMessageContent\n\n# Create buttons\nbuttons = ButtonBuilder()\nbuttons.add_button(\"accept\", \"Accept\", ButtonMessageStyle.SUCCESS)\nbuttons.add_button(\"decline\", \"Decline\", ButtonMessageStyle.DANGER)\nbuttons.add_button(\"help\", \"Help\", ButtonMessageStyle.LINK, url=\"https://help.mezon.ai\")\n\n# Send with buttons\nchannel = await client.channels.fetch(channel_id)\nawait channel.send(\n    content=ChannelMessageContent(\n        text=\"Do you accept?\",\n        components=[{\"components\": buttons.build()}]\n    )\n)\n</code></pre>"},{"location":"guide/interactive/#button-styles","title":"Button Styles","text":"Style Appearance Use Case <code>ButtonMessageStyle.PRIMARY</code> Blue Primary action <code>ButtonMessageStyle.SECONDARY</code> Gray Secondary action <code>ButtonMessageStyle.SUCCESS</code> Green Confirm/accept <code>ButtonMessageStyle.DANGER</code> Red Cancel/delete <code>ButtonMessageStyle.LINK</code> Link External URL (requires <code>url</code> param)"},{"location":"guide/interactive/#interactivebuilder","title":"InteractiveBuilder","text":"<p>Build rich forms with multiple field types:</p> <pre><code>from mezon import InteractiveBuilder\nfrom mezon.models import SelectFieldOption, RadioFieldOption\n\n# Create form\nform = InteractiveBuilder(\"User Survey\")\nform.set_description(\"Please fill out this survey\")\nform.set_color(\"#5865F2\")\nform.set_author(\"Survey Bot\", icon_url=\"https://example.com/icon.png\")\n\n# Add fields\nform.add_input_field(\n    \"username\",\n    \"Username\",\n    placeholder=\"Enter your username\",\n    description=\"Choose a unique username\"\n)\n\nform.add_select_field(\n    \"country\",\n    \"Country\",\n    options=[\n        SelectFieldOption(label=\"United States\", value=\"us\"),\n        SelectFieldOption(label=\"Vietnam\", value=\"vn\"),\n    ],\n    description=\"Select your country\"\n)\n\nform.add_radio_field(\n    \"plan\",\n    \"Plan\",\n    options=[\n        RadioFieldOption(label=\"Free\", value=\"free\", description=\"Basic\"),\n        RadioFieldOption(label=\"Pro\", value=\"pro\", description=\"Advanced\"),\n    ]\n)\n\nform.add_datepicker_field(\"birthdate\", \"Birth Date\")\n\n# Send with form and buttons\nbuttons = ButtonBuilder()\nbuttons.add_button(\"submit\", \"Submit\", ButtonMessageStyle.SUCCESS)\nbuttons.add_button(\"cancel\", \"Cancel\", ButtonMessageStyle.SECONDARY)\n\nawait channel.send(\n    content=ChannelMessageContent(\n        text=\"Please complete this form:\",\n        embed=[form.build()],\n        components=[{\"components\": buttons.build()}]\n    )\n)\n</code></pre>"},{"location":"guide/interactive/#field-types","title":"Field Types","text":"Method Description <code>add_input_field()</code> Text input (single/multi-line) <code>add_select_field()</code> Dropdown selection <code>add_radio_field()</code> Radio buttons <code>add_datepicker_field()</code> Date picker <code>add_animation()</code> Animated content <code>add_field()</code> Simple text field"},{"location":"guide/interactive/#customizing-embeds","title":"Customizing Embeds","text":"<pre><code>embed = InteractiveBuilder(\"Custom Embed\")\n\n# Styling\nembed.set_color(\"#FF5733\")\nembed.set_title(\"My Title\")\nembed.set_url(\"https://mezon.ai\")\nembed.set_description(\"Description here\")\n\n# Author\nembed.set_author(\n    \"Author Name\",\n    icon_url=\"https://example.com/author.png\",\n    url=\"https://example.com/author\"\n)\n\n# Images\nembed.set_thumbnail(\"https://example.com/thumb.png\")\nembed.set_image(\n    \"https://example.com/banner.png\",\n    width=\"800\",\n    height=\"400\"\n)\n\n# Footer\nembed.set_footer(\"Footer Text\", icon_url=\"https://example.com/footer.png\")\n\n# Simple fields\nembed.add_field(\"Field 1\", \"Value 1\", inline=True)\nembed.add_field(\"Field 2\", \"Value 2\", inline=True)\n\nawait channel.send(\n    content=ChannelMessageContent(embed=[embed.build()])\n)\n</code></pre>"},{"location":"guide/interactive/#handling-button-clicks","title":"Handling Button Clicks","text":"<pre><code>async def on_button_click(event):\n    button_id = event.button_id  # The ID you set in add_button()\n    user_id = event.user_id\n\n    if button_id == \"accept\":\n        # Handle accept\n        pass\n    elif button_id == \"decline\":\n        # Handle decline\n        pass\n\nclient.on_message_button_clicked(on_button_click)\n</code></pre>"},{"location":"guide/interactive/#complete-example","title":"Complete Example","text":"<pre><code>import json\nfrom mezon import MezonClient, ButtonBuilder, InteractiveBuilder, ButtonMessageStyle\nfrom mezon.models import ChannelMessageContent, SelectFieldOption\nfrom mezon.protobuf.api import api_pb2\n\nclient = MezonClient(client_id=\"...\", api_key=\"...\")\n\nasync def handle_message(message: api_pb2.ChannelMessage):\n    if message.sender_id == client.client_id:\n        return\n\n    content = json.loads(message.content)\n    text = content.get(\"t\", \"\")\n\n    if text == \"!survey\":\n        channel = await client.channels.fetch(message.channel_id)\n\n        # Build form\n        form = InteractiveBuilder(\"Quick Survey\")\n        form.set_color(\"#5865F2\")\n        form.add_select_field(\n            \"rating\",\n            \"How's your experience?\",\n            options=[\n                SelectFieldOption(label=\"Excellent\", value=\"5\"),\n                SelectFieldOption(label=\"Good\", value=\"4\"),\n                SelectFieldOption(label=\"Okay\", value=\"3\"),\n            ]\n        )\n\n        # Build buttons\n        buttons = ButtonBuilder()\n        buttons.add_button(\"submit_survey\", \"Submit\", ButtonMessageStyle.SUCCESS)\n\n        await channel.send(\n            content=ChannelMessageContent(\n                embed=[form.build()],\n                components=[{\"components\": buttons.build()}]\n            )\n        )\n\nasync def handle_button(event):\n    if event.button_id == \"submit_survey\":\n        # Process survey response\n        channel = await client.channels.fetch(event.channel_id)\n        await channel.send_ephemeral(\n            receiver_id=event.user_id,\n            content=ChannelMessageContent(text=\"Thanks for your feedback!\")\n        )\n\nclient.on_channel_message(handle_message)\nclient.on_message_button_clicked(handle_button)\n</code></pre>"},{"location":"guide/messaging/","title":"Sending Messages","text":"<p>Learn how to send various types of messages using the SDK.</p>"},{"location":"guide/messaging/#basic-messages","title":"Basic Messages","text":""},{"location":"guide/messaging/#using-channel-objects-recommended","title":"Using Channel Objects (Recommended)","text":"<pre><code>from mezon.models import ChannelMessageContent\n\n# Get the channel\nchannel = await client.channels.fetch(\"channel_id\")\n\n# Send a text message\nawait channel.send(content=ChannelMessageContent(t=\"Hello, world!\"))\n</code></pre>"},{"location":"guide/messaging/#message-content","title":"Message Content","text":"<p>The <code>ChannelMessageContent</code> model supports:</p> <pre><code>from mezon.models import ChannelMessageContent\n\n# Text message\ncontent = ChannelMessageContent(t=\"Hello!\")\n\n# With text (alternative field)\ncontent = ChannelMessageContent(text=\"Hello!\")\n</code></pre>"},{"location":"guide/messaging/#mentions","title":"Mentions","text":"<p>Mention users in your messages:</p> <pre><code>from mezon.models import ChannelMessageContent, ApiMessageMention\n\nawait channel.send(\n    content=ChannelMessageContent(t=\"Hello @user!\"),\n    mentions=[\n        ApiMessageMention(user_id=\"user_id_here\")\n    ]\n)\n</code></pre>"},{"location":"guide/messaging/#attachments","title":"Attachments","text":"<p>Send messages with attachments:</p> <pre><code>from mezon.models import ChannelMessageContent, ApiMessageAttachment\n\nawait channel.send(\n    content=ChannelMessageContent(t=\"Check out this image!\"),\n    attachments=[\n        ApiMessageAttachment(\n            url=\"https://example.com/image.png\",\n            filename=\"image.png\"\n        )\n    ]\n)\n</code></pre>"},{"location":"guide/messaging/#ephemeral-messages","title":"Ephemeral Messages","text":"<p>Ephemeral messages are only visible to a specific user:</p> <pre><code>await channel.send_ephemeral(\n    receiver_id=\"user_id\",\n    content=ChannelMessageContent(text=\"Only you can see this!\")\n)\n</code></pre>"},{"location":"guide/messaging/#replying-to-messages","title":"Replying to Messages","text":"<p>Reply to a specific message:</p> <pre><code># Get the message object\nmessage = channel.messages.get(\"message_id\")\n\n# Send a reply\nawait message.reply(\n    content=ChannelMessageContent(t=\"This is a reply!\")\n)\n</code></pre>"},{"location":"guide/messaging/#updating-messages","title":"Updating Messages","text":"<p>Edit a previously sent message:</p> <pre><code># Send a message\nsent = await channel.send(content=ChannelMessageContent(t=\"Original text\"))\n\n# Update it\nmessage = channel.messages.get(sent.message_id)\nawait message.update(\n    content=ChannelMessageContent(t=\"Updated text (edited)\")\n)\n</code></pre>"},{"location":"guide/messaging/#adding-reactions","title":"Adding Reactions","text":"<p>React to messages:</p> <pre><code>message = channel.messages.get(\"message_id\")\nawait message.react(\n    emoji_id=\"emoji_id\",\n    emoji=\"emoji_name\",\n    count=1\n)\n</code></pre>"},{"location":"guide/messaging/#legacy-method","title":"Legacy Method","text":"<p>The client also provides a direct method (legacy):</p> <pre><code>await client.send_message(\n    clan_id=\"clan_id\",\n    channel_id=\"channel_id\",\n    mode=1,  # Channel mode\n    is_public=True,\n    msg=\"Your message here\",\n    mentions=None,      # Optional: List[ApiMessageMention]\n    attachments=None,   # Optional: List[ApiMessageAttachment]\n    ref=None,           # Optional: List[ApiMessageRef] for replies\n)\n</code></pre>"},{"location":"guide/messaging/#message-references","title":"Message References","text":"<p>For replies using the legacy method:</p> <pre><code>from mezon.models import ApiMessageRef\n\nawait client.send_message(\n    clan_id=\"clan_id\",\n    channel_id=\"channel_id\",\n    mode=1,\n    is_public=True,\n    msg=\"This is a reply\",\n    ref=[ApiMessageRef(message_id=\"original_message_id\")]\n)\n</code></pre>"},{"location":"guide/messaging/#best-practices","title":"Best Practices","text":"<ol> <li>Use channel objects - They provide a cleaner API than the legacy method</li> <li>Handle errors - Wrap sends in try/except for network issues</li> <li>Rate limiting - The SDK handles rate limiting automatically, but avoid spamming</li> <li>Ephemeral for sensitive info - Use ephemeral messages for user-specific content</li> </ol>"},{"location":"guide/tokens/","title":"Token Sending","text":"<p>The SDK allows you to send tokens to other users on the Mezon platform.</p>"},{"location":"guide/tokens/#overview","title":"Overview","text":"<p>Token sending uses:</p> <ul> <li>ZK Proof Generation - Zero-knowledge proofs for transaction authentication</li> <li>Nonce Management - Automatic nonce handling for each transaction</li> <li>Transaction Signing - Signatures using ephemeral key pairs</li> </ul>"},{"location":"guide/tokens/#basic-usage","title":"Basic Usage","text":"<pre><code>from mezon.models import ApiSentTokenRequest\nfrom mmn import AddTxResponse\n\n# Send tokens to a user\nresult: AddTxResponse = await client.send_token(\n    ApiSentTokenRequest(\n        receiver_id=\"user_id\",\n        amount=10,  # Amount in tokens\n        note=\"Thanks for your help!\",\n    )\n)\n\n# Check result\nif result.ok:\n    print(f\"Success! TX Hash: {result.tx_hash}\")\nelse:\n    print(f\"Failed: {result.error}\")\n</code></pre>"},{"location":"guide/tokens/#request-parameters","title":"Request Parameters","text":"Parameter Type Required Description <code>receiver_id</code> <code>str</code> Yes Recipient user ID <code>amount</code> <code>int</code> Yes Token amount <code>note</code> <code>str</code> No Transaction note <code>sender_name</code> <code>str</code> No Custom sender display name <code>sender_id</code> <code>str</code> No Override sender ID <code>extra_attribute</code> <code>str</code> No Additional metadata <code>mmn_extra_info</code> <code>dict</code> No MMN-specific extra info"},{"location":"guide/tokens/#advanced-usage","title":"Advanced Usage","text":"<pre><code>result = await client.send_token(\n    ApiSentTokenRequest(\n        receiver_id=\"user_id\",\n        amount=10,\n        note=\"Event reward\",\n        sender_name=\"My Bot\",\n        extra_attribute=\"event_2024\",\n        mmn_extra_info={\n            \"event_id\": \"12345\",\n            \"reward_type\": \"participation\",\n        },\n    )\n)\n</code></pre>"},{"location":"guide/tokens/#error-handling","title":"Error Handling","text":"<pre><code>try:\n    result = await client.send_token(\n        ApiSentTokenRequest(\n            receiver_id=\"user_id\",\n            amount=1,\n            note=\"Test\",\n        )\n    )\n\n    if not result.ok:\n        print(f\"Transaction failed: {result.error}\")\n    else:\n        print(f\"TX Hash: {result.tx_hash}\")\n\nexcept ValueError as e:\n    # MMN client not initialized\n    print(f\"MMN unavailable: {e}\")\nexcept Exception as e:\n    print(f\"Error: {e}\")\n</code></pre>"},{"location":"guide/tokens/#in-message-handlers","title":"In Message Handlers","text":"<p>Common pattern - reward users for actions:</p> <pre><code>import json\nfrom mezon.models import ApiSentTokenRequest, ChannelMessageContent\n\nasync def handle_message(message: api_pb2.ChannelMessage):\n    if message.sender_id == client.client_id:\n        return\n\n    content = json.loads(message.content)\n    text = content.get(\"t\", \"\")\n\n    if text == \"!daily\":\n        # Send daily reward\n        result = await client.send_token(\n            ApiSentTokenRequest(\n                receiver_id=message.sender_id,\n                amount=10,\n                note=\"Daily reward!\",\n            )\n        )\n\n        channel = await client.channels.fetch(message.channel_id)\n\n        if result.ok:\n            await channel.send(\n                content=ChannelMessageContent(t=\"You received 10 tokens!\")\n            )\n        else:\n            await channel.send_ephemeral(\n                receiver_id=message.sender_id,\n                content=ChannelMessageContent(text=f\"Failed: {result.error}\")\n            )\n\nclient.on_channel_message(handle_message)\n</code></pre>"},{"location":"guide/tokens/#requirements","title":"Requirements","text":"<p>Before using <code>send_token</code>:</p> <ol> <li>Client must be logged in (<code>await client.login()</code>)</li> <li>Bot must have sufficient token balance</li> <li>Receiver user ID must be valid</li> </ol> <p>The SDK automatically initializes MMN and ZK clients during login.</p>"},{"location":"guide/tokens/#token-events","title":"Token Events","text":"<p>Listen for token-related events:</p> <pre><code>from mezon import Events\n\nasync def on_token_sent(event):\n    print(f\"Token sent: {event}\")\n\nclient.on(Events.TOKEN_SEND, on_token_sent)\n</code></pre>"},{"location":"guide/users/","title":"Users","text":"<p>Working with users in the Mezon SDK.</p>"},{"location":"guide/users/#accessing-users","title":"Accessing Users","text":"<pre><code># Get a user from cache\nuser = await client.users.get(\"user_id\")\n\nprint(f\"User ID: {user.id}\")\n</code></pre>"},{"location":"guide/users/#sending-direct-messages","title":"Sending Direct Messages","text":"<p>Send a DM to a user:</p> <pre><code>from mezon.models import ChannelMessageContent\n\nuser = await client.users.get(\"user_id\")\nawait user.send_dm_message(\n    content=ChannelMessageContent(t=\"Hello via DM!\")\n)\n</code></pre>"},{"location":"guide/users/#friends","title":"Friends","text":""},{"location":"guide/users/#list-friends","title":"List Friends","text":"<pre><code>friends = await client.get_list_friends(\n    limit=100,\n    state=None,   # Optional filter\n    cursor=None   # For pagination\n)\n\nfor friend in friends:\n    print(f\"Friend: {friend}\")\n</code></pre>"},{"location":"guide/users/#add-friend","title":"Add Friend","text":"<pre><code>await client.add_friend(\n    username=\"friend_username\",\n    user_id=\"friend_user_id\"\n)\n</code></pre>"},{"location":"guide/users/#accept-friend-request","title":"Accept Friend Request","text":"<pre><code>await client.accept_friend(user_id=\"user_id\")\n</code></pre>"},{"location":"guide/users/#user-events","title":"User Events","text":""},{"location":"guide/users/#user-joined-channel","title":"User Joined Channel","text":"<pre><code>from mezon.protobuf.rtapi import realtime_pb2\n\nasync def on_user_joined(event: realtime_pb2.UserChannelAdded):\n    print(f\"User {event.user_id} joined channel {event.channel_id}\")\n\nclient.on_user_channel_added(on_user_joined)\n</code></pre>"},{"location":"guide/users/#user-left-channel","title":"User Left Channel","text":"<pre><code>async def on_user_left(event: realtime_pb2.UserChannelRemoved):\n    print(f\"User {event.user_id} left channel {event.channel_id}\")\n\nclient.on_user_channel_removed(on_user_left)\n</code></pre>"},{"location":"guide/users/#user-joined-clan","title":"User Joined Clan","text":"<pre><code>async def on_user_joined_clan(event: realtime_pb2.AddClanUserEvent):\n    print(f\"User joined clan: {event.clan_id}\")\n\nclient.on_add_clan_user(on_user_joined_clan)\n</code></pre>"},{"location":"guide/users/#user-left-clan","title":"User Left Clan","text":"<pre><code>from mezon import Events\n\nasync def on_user_left_clan(event):\n    print(f\"User left clan\")\n\nclient.on(Events.USER_CLAN_REMOVED, on_user_left_clan)\n</code></pre>"},{"location":"guide/users/#message-author","title":"Message Author","text":"<p>When handling messages, access the sender:</p> <pre><code>async def handle_message(message: api_pb2.ChannelMessage):\n    sender_id = message.sender_id\n\n    # Check if it's the bot\n    if sender_id == client.client_id:\n        return\n\n    # Get user object\n    user = await client.users.get(sender_id)\n\n    # Reply or DM\n    channel = await client.channels.fetch(message.channel_id)\n    await channel.send(\n        content=ChannelMessageContent(t=f\"Hello &lt;@{sender_id}&gt;!\")\n    )\n\nclient.on_channel_message(handle_message)\n</code></pre>"}]}